/*! 
 Build based on melong-console 
 Time : 1754662730000 */
import{l as e}from"./pixel-logo.1754662730000.js";import{r as l,a,i as o,o as s,u as t,c as r,b as i,d as n,w as d,e as g,t as u,f as p,g as m,h as c,j as w,k as f,E as v,l as h,m as _}from"../assets/pixel-entry-index.1754662730000.js";import{v as b,a as y}from"./pixel-validates.1754662730000.js";import{g as x,d as V,s as $}from"./pixel-format.1754662730000.js";const k=""+new URL("../assets/pixel-cards_login_new.1754662730000.png",import.meta.url).href,C={class:"container-fluid"},P={class:"position-absolute top-0 p-3",style:{right:"100px"}},U={class:"raw align-items-end d-flex"},j={class:"col col-6 vh100"},q={class:"left-container"},R={class:"slogan text-left"},z={class:"mb-2"},E={class:"mb-2 text-highlight"},F={class:"mb-2"},I={class:"mb-2 text-highlight"},D={class:"col col-6 vh100"},L={class:"right-side"},S={class:"mb-3 fs-5"},M={class:"justify-content-between w-100 d-flex"},T={class:"w-100"},A={class:"mb-3 fs-5"},B={class:"w-100"},G={class:"mb-3 fs-5"},H={class:"text-secondary",style:{"font-size":"small"}},J={class:"w-100"},K={__name:"login",setup(K){const N=l(!1),O=l(),Q=l(),W=a({email:[{required:!0,message:o.global.t("lang.validation.email_required"),trigger:"blur"},{validator:b,message:o.global.t("lang.validation.email_invalid"),trigger:"blur"}]}),X=l("login"),Y=a({email:"",password:"",authMethod:2,phone:"",code:"",verifyCode:"",remember:!1}),Z=a({email:"",password:"",newPassword:""}),ee=a({email:"",name:"",repeatPassword:"",password:"",phone:"",verifyCode:"",inviteCode:""}),le=e=>{window.localStorage.setItem("global.lang",e),o.global.locale.value=e};s((()=>{let e=window.localStorage.getItem("global.lang");console.log(e,2222,o.global.locale.value),e&&(o.global.locale.value=e);x("verification_free")&&(N.value=!0)}));const ae=a({email:[{validator:b,trigger:"blur"}],password:[{validator:y,trigger:"blur"}],newPassword:[{validator:(e,l,a)=>{l!==Z.password?a(new Error(o.global.t("lang.validation.password_mismatch"))):a()},trigger:"blur"}]}),oe=a({name:[{required:!0,message:o.global.t("lang.validation.name_required"),trigger:"blur"},{min:6,max:20,message:o.global.t("lang.validation.name_length"),trigger:"blur"},{whitespace:!0,message:o.global.t("lang.validation.name_whitespace"),trigger:"blur"}],email:[{validator:b,trigger:"blur"}],password:[{validator:y,trigger:"blur"}],repeatPassword:[{validator:(e,l,a)=>{l!==ee.password?a(new Error(o.global.t("lang.validation.password_mismatch"))):a()},trigger:"blur"}],inviteCode:[{required:!0,message:o.global.t("lang.validation.invite_code_required"),trigger:"blur"},{len:6,message:o.global.t("lang.validation.invite_code_length"),trigger:"blur"}],verifyCode:[{required:!0,message:o.global.t("lang.validation.verify_code_required"),trigger:"blur"},{len:6,message:o.global.t("lang.validation.verify_code_length"),trigger:"blur"}]}),se=t(),te=async()=>{await O.value.validate()&&se.LoginIn(Y).then((e=>{e&&Y.remember&&$("verification_free","yes",30)}))},re=async()=>{await foundPasswordFormRef.value.validate()&&_(Z).then((e=>{0===e.code&&(v.success("Reset password success"),X.value="login")}))},ie=async()=>{await Q.value.validate()&&(ee.password==ee.repeatPassword?h(ee).then((e=>{0===e.code&&(X.value="login",v.success("注册成功"))})):v.error("two password not same"))};a({email:"",password:"",newPassword:"",verifyCode:"",disable:!1,sendText:"Send code",intervalID:null,countdown:60,lastDateTime:Date.now()});return(l,a)=>{const s=g("arrow-down"),t=g("el-icon"),v=g("el-button"),h=g("el-dropdown-item"),_=g("el-dropdown-menu"),b=g("el-dropdown"),y=g("el-input"),x=g("el-form-item"),$=g("el-link"),K=g("el-form"),N=g("el-card");return c(),r("div",C,[i("div",P,[n(b,{class:"me-2","popper-class":"px-2"},{dropdown:d((()=>[n(_,null,{default:d((()=>[n(h,{onClick:a[0]||(a[0]=e=>le("zh")),class:"justify-content-center"},{default:d((()=>a[17]||(a[17]=[w("中文")]))),_:1}),n(h,{onClick:a[1]||(a[1]=e=>le("en")),class:"justify-content-center"},{default:d((()=>a[18]||(a[18]=[w("English")]))),_:1})])),_:1})])),default:d((()=>[n(v,{type:"text",style:{"min-width":"100px"}},{default:d((()=>[w(u("zh"===f(o).global.locale.value?"中文":"English"),1),n(t,{class:"el-icon--right"},{default:d((()=>[n(s)])),_:1})])),_:1})])),_:1})]),i("div",U,[i("div",j,[i("div",q,[a[20]||(a[20]=i("div",{class:"logo text-center"},[i("img",{src:e,alt:"Logo",class:"logo"})],-1)),i("div",R,[i("h1",z,u(l.$t("lang.login.slogan.line1")),1),i("h1",E,u(l.$t("lang.login.slogan.line2")),1),i("h1",F,u(l.$t("lang.login.slogan.line3")),1),i("h1",I,u(l.$t("lang.login.slogan.line4")),1),a[19]||(a[19]=i("div",{class:"left-main-image text-center"},[i("img",{src:k,alt:"Main",class:"main-image"})],-1))])])]),i("div",D,[i("div",L,["login"==X.value?(c(),p(N,{key:0,class:"login-card login-form"},{default:d((()=>[i("h2",S,u(l.$t("lang.login.title")),1),n(K,{ref_key:"loginFormRef",ref:O,model:Y,rules:W,"label-width":"0px"},{default:d((()=>[n(x,{prop:"email",class:"login-form-item"},{default:d((()=>[n(y,{modelValue:Y.email,"onUpdate:modelValue":a[2]||(a[2]=e=>Y.email=e),placeholder:l.$t("lang.login.email"),class:"login-form-input"},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"password",class:"login-form-item"},{default:d((()=>[n(y,{modelValue:Y.password,"onUpdate:modelValue":a[3]||(a[3]=e=>Y.password=e),type:"password",placeholder:l.$t("lang.login.password"),class:"login-form-input","show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,null,{default:d((()=>[i("div",M,[a[21]||(a[21]=i("div",null,null,-1)),i("div",null,[n($,{onClick:a[4]||(a[4]=e=>(V("verification_free"),void window.location.reload())),type:"danger",style:{float:"right","margin-left":"10px","font-size":"12px"}},{default:d((()=>[w(u(l.$t("lang.login.clear_cache")),1)])),_:1}),n($,{type:"danger",style:{float:"right","font-size":"12px"},onClick:a[5]||(a[5]=e=>X.value="forgetPassword")},{default:d((()=>[w(u(l.$t("lang.login.forgot_password")),1)])),_:1})])])])),_:1}),n(x,null,{default:d((()=>[n(v,{class:"w-100 login-btn",type:"primary",onClick:te},{default:d((()=>[w(u(l.$t("lang.login.login_btn")),1)])),_:1}),i("div",T,[n(v,{style:{float:"right"},class:"btn text-end text-end btn-link",onClick:a[6]||(a[6]=e=>X.value="register")},{default:d((()=>[w(u(l.$t("lang.login.register_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):m("",!0),"register"==X.value?(c(),p(N,{key:1,class:"login-card"},{default:d((()=>[i("h2",A,u(l.$t("lang.register.title")),1),n(K,{ref_key:"registerFormRef",ref:Q,model:ee,rules:oe,"label-width":"0px"},{default:d((()=>[n(x,{prop:"name"},{default:d((()=>[n(y,{modelValue:ee.name,"onUpdate:modelValue":a[7]||(a[7]=e=>ee.name=e),placeholder:l.$t("lang.register.name")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"email"},{default:d((()=>[n(y,{modelValue:ee.email,"onUpdate:modelValue":a[8]||(a[8]=e=>ee.email=e),placeholder:l.$t("lang.register.email")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"password"},{default:d((()=>[n(y,{modelValue:ee.password,"onUpdate:modelValue":a[9]||(a[9]=e=>ee.password=e),type:"password",placeholder:l.$t("lang.register.password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"repeatPassword"},{default:d((()=>[n(y,{modelValue:ee.repeatPassword,"onUpdate:modelValue":a[10]||(a[10]=e=>ee.repeatPassword=e),type:"password",placeholder:l.$t("lang.register.repeat_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"inviteCode"},{default:d((()=>[n(y,{modelValue:ee.inviteCode,"onUpdate:modelValue":a[11]||(a[11]=e=>ee.inviteCode=e),placeholder:l.$t("lang.register.invite_code")},null,8,["modelValue","placeholder"])])),_:1}),n(x,null,{default:d((()=>[n(v,{class:"w-100",type:"primary",onClick:ie},{default:d((()=>[w(u(l.$t("lang.register.register_btn")),1)])),_:1}),i("div",B,[n(v,{class:"btn text-end text-end btn-link",onClick:a[12]||(a[12]=e=>X.value="login")},{default:d((()=>[w(u(l.$t("lang.register.login_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):m("",!0),"forgetPassword"==X.value?(c(),p(N,{key:2,class:"login-card"},{default:d((()=>[i("h2",G,u(l.$t("lang.forgot.title")),1),i("p",H,u(l.$t("lang.forgot.description")),1),n(K,{ref:"foundPasswordFormRef",model:Z,rules:ae,"label-width":"0px"},{default:d((()=>[n(x,{prop:"email"},{default:d((()=>[n(y,{modelValue:Z.email,"onUpdate:modelValue":a[13]||(a[13]=e=>Z.email=e),placeholder:l.$t("lang.forgot.email")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"password"},{default:d((()=>[n(y,{modelValue:Z.password,"onUpdate:modelValue":a[14]||(a[14]=e=>Z.password=e),type:"password",placeholder:l.$t("lang.forgot.new_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"newPassword"},{default:d((()=>[n(y,{modelValue:Z.newPassword,"onUpdate:modelValue":a[15]||(a[15]=e=>Z.newPassword=e),type:"password",placeholder:l.$t("lang.forgot.repeat_new_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,null,{default:d((()=>[n(v,{class:"w-100",type:"primary",onClick:re},{default:d((()=>[w(u(l.$t("lang.forgot.confirm_btn")),1)])),_:1}),i("div",J,[n(v,{class:"btn text-end text-end btn-link",onClick:a[16]||(a[16]=e=>X.value="login")},{default:d((()=>[w(u(l.$t("lang.forgot.login_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):m("",!0)])])])])}}};export{K as default};
