/*! 
 Build based on gin-vue-admin 
 Time : 1754292185000 */
import{s as a}from"./pixel-authority.17542921850002.js";import{w as e}from"./pixel-warningBar.1754292185000.js";import{r as t,b as l,o as r,c as o,d as u,f as i,w as s,g as n,G as d,H as h,l as c,t as y,h as f}from"../gva/pixel-index.1754292185000.js";const m={class:"clearflex",style:{margin:"18px"}},p=Object.assign({name:"Datas"},{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(p,{expose:v,emit:w}){const I=p,g=t([]),x=t(!1),b=a=>{a&&a.forEach((a=>{const e={};e.authorityId=a.authorityId,e.authorityName=a.authorityName,g.value.push(e),a.children&&a.children.length&&b(a.children)}))},A=t([]);b(I.authority),I.row.dataAuthorityId&&I.row.dataAuthorityId.forEach((a=>{const e=g.value&&g.value.filter((e=>e.authorityId===a.authorityId))&&g.value.filter((e=>e.authorityId===a.authorityId))[0];A.value.push(e)}));const k=w,C=()=>{A.value=[...g.value],k("changeRow","dataAuthorityId",A.value),x.value=!0},_=()=>{A.value=g.value.filter((a=>a.authorityId===I.row.authorityId)),k("changeRow","dataAuthorityId",A.value),x.value=!0},j=()=>{const a=[];R(I.row,a),A.value=g.value.filter((e=>a.indexOf(e.authorityId)>-1)),k("changeRow","dataAuthorityId",A.value),x.value=!0},R=(a,e)=>{e.push(a.authorityId),a.children&&a.children.forEach((a=>{R(a,e)}))},z=()=>{return e=this,t=null,l=function*(){0===(yield a(I.row)).code&&f({type:"success",message:"资源设置成功"})},new Promise(((a,r)=>{var o=a=>{try{i(l.next(a))}catch(e){r(e)}},u=a=>{try{i(l.throw(a))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,u);i((l=l.apply(e,t)).next())}));var e,t,l},N=()=>{k("changeRow","dataAuthorityId",A.value),x.value=!0};return v({enterAndNext:()=>{z()},needConfirm:x}),(a,t)=>{const f=l("el-button"),p=l("el-checkbox"),v=l("el-checkbox-group");return r(),o("div",null,[u("div",m,[i(f,{class:"fl-right",size:"small",type:"primary",onClick:z},{default:s((()=>t[1]||(t[1]=[n("确 定")]))),_:1}),i(f,{class:"fl-left",size:"small",type:"primary",onClick:C},{default:s((()=>t[2]||(t[2]=[n("全选")]))),_:1}),i(f,{class:"fl-left",size:"small",type:"primary",onClick:_},{default:s((()=>t[3]||(t[3]=[n("本角色")]))),_:1}),i(f,{class:"fl-left",size:"small",type:"primary",onClick:j},{default:s((()=>t[4]||(t[4]=[n("本角色及子角色")]))),_:1})]),i(v,{modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=a=>A.value=a),onChange:N},{default:s((()=>[(r(!0),o(d,null,h(g.value,((a,e)=>(r(),c(p,{key:e,label:a},{default:s((()=>[n(y(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),i(e,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）"})])}}});export{p as default};
