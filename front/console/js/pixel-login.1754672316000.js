/*! 
 Build based on melong-console 
 Time : 1754672316000 */
import{l as e}from"./pixel-logo.1754672316000.js";import{u as l,a,r as s,b as o,o as t,c as r,d as i,e as n,f as d,w as g,g as p,t as u,h as m,i as c,j as f,k as w,l as v,E as h,m as _,n as b}from"../assets/pixel-entry-index.1754672316000.js";import{v as y,a as x}from"./pixel-validates.1754672316000.js";import{g as V,d as $,s as k}from"./pixel-format.1754672316000.js";const C=""+new URL("../assets/pixel-cards_login_new.1754672316000.png",import.meta.url).href,P={class:"container-fluid"},U={class:"position-absolute top-0 p-3",style:{right:"100px"}},j={class:"raw align-items-end d-flex"},q={class:"col col-6 vh100"},R={class:"left-container"},z={class:"slogan text-left"},E={class:"mb-2"},L={class:"mb-2 text-highlight"},F={class:"mb-2"},D={class:"mb-2 text-highlight"},I={class:"col col-6 vh100"},M={class:"right-side"},T={class:"mb-3 fs-5"},S={class:"justify-content-between w-100 d-flex"},A={class:"w-100"},B={class:"mb-3 fs-5"},G={class:"w-100"},H={class:"mb-3 fs-5"},J={class:"text-secondary",style:{"font-size":"small"}},K={class:"w-100"},N={__name:"login",setup(N){const O=l(),{t:Q}=a(),W=s(!1),X=s(),Y=s(),Z=o({email:[{required:!0,message:Q("lang.validation.email_required"),trigger:"blur"},{validator:y,message:Q("lang.validation.email_invalid"),trigger:"blur"}]}),ee=s("login"),le=o({email:"",password:"",authMethod:2,phone:"",code:"",verifyCode:"",remember:!1}),ae=o({email:"",password:"",newPassword:""}),se=o({email:"",name:"",repeatPassword:"",password:"",phone:"",verifyCode:"",inviteCode:""}),oe=e=>{O.changeLocale(e)};t((()=>{V("verification_free")&&(W.value=!0)}));const te=o({email:[{validator:y,trigger:"blur"}],password:[{validator:x,trigger:"blur"}],newPassword:[{validator:(e,l,a)=>{l!==ae.password?a(new Error(Q("lang.validation.password_mismatch"))):a()},trigger:"blur"}]}),re=o({name:[{required:!0,message:Q("lang.validation.name_required"),trigger:"blur"},{min:6,max:20,message:Q("lang.validation.name_length"),trigger:"blur"},{whitespace:!0,message:Q("lang.validation.name_whitespace"),trigger:"blur"}],email:[{validator:y,trigger:"blur"}],password:[{validator:x,trigger:"blur"}],repeatPassword:[{validator:(e,l,a)=>{l!==se.password?a(new Error(Q("lang.validation.password_mismatch"))):a()},trigger:"blur"}],inviteCode:[{required:!0,message:Q("lang.validation.invite_code_required"),trigger:"blur"},{len:6,message:Q("lang.validation.invite_code_length"),trigger:"blur"}],verifyCode:[{required:!0,message:Q("lang.validation.verify_code_required"),trigger:"blur"},{len:6,message:Q("lang.validation.verify_code_length"),trigger:"blur"}]}),ie=r(),ne=async()=>{await X.value.validate()&&ie.LoginIn(le).then((e=>{e&&le.remember&&k("verification_free","yes",30)}))},de=async()=>{await foundPasswordFormRef.value.validate()&&b(ae).then((e=>{0===e.code&&(h.success("Reset password success"),ee.value="login")}))},ge=async()=>{await Y.value.validate()&&(se.password==se.repeatPassword?_(se).then((e=>{0===e.code&&(ee.value="login",h.success("注册成功"))})):h.error("two password not same"))};o({email:"",password:"",newPassword:"",verifyCode:"",disable:!1,sendText:"Send code",intervalID:null,countdown:60,lastDateTime:Date.now()});return(l,a)=>{const s=p("arrow-down"),o=p("el-icon"),t=p("el-button"),r=p("el-dropdown-item"),h=p("el-dropdown-menu"),_=p("el-dropdown"),b=p("el-input"),y=p("el-form-item"),x=p("el-link"),V=p("el-form"),k=p("el-card");return f(),i("div",P,[n("div",U,[d(_,{class:"me-2","popper-class":"px-2"},{dropdown:g((()=>[d(h,null,{default:g((()=>[d(r,{onClick:a[0]||(a[0]=e=>oe("zh")),class:"justify-content-center"},{default:g((()=>a[17]||(a[17]=[w("中文")]))),_:1}),d(r,{onClick:a[1]||(a[1]=e=>oe("en")),class:"justify-content-center"},{default:g((()=>a[18]||(a[18]=[w("English")]))),_:1})])),_:1})])),default:g((()=>[d(t,{type:"text",style:{"min-width":"100px"}},{default:g((()=>[w(u("zh"===v(O).currentLocale?"中文":"English"),1),d(o,{class:"el-icon--right"},{default:g((()=>[d(s)])),_:1})])),_:1})])),_:1})]),n("div",j,[n("div",q,[n("div",R,[a[20]||(a[20]=n("div",{class:"logo text-center"},[n("img",{src:e,alt:"Logo",class:"logo"})],-1)),n("div",z,[n("h1",E,u(l.$t("lang.login.slogan.line1")),1),n("h1",L,u(l.$t("lang.login.slogan.line2")),1),n("h1",F,u(l.$t("lang.login.slogan.line3")),1),n("h1",D,u(l.$t("lang.login.slogan.line4")),1),a[19]||(a[19]=n("div",{class:"left-main-image text-center"},[n("img",{src:C,alt:"Main",class:"main-image"})],-1))])])]),n("div",I,[n("div",M,["login"==ee.value?(f(),m(k,{key:0,class:"login-card login-form"},{default:g((()=>[n("h2",T,u(l.$t("lang.login.title")),1),d(V,{ref_key:"loginFormRef",ref:X,model:le,rules:Z,"label-width":"0px"},{default:g((()=>[d(y,{prop:"email",class:"login-form-item"},{default:g((()=>[d(b,{modelValue:le.email,"onUpdate:modelValue":a[2]||(a[2]=e=>le.email=e),placeholder:l.$t("lang.login.email"),class:"login-form-input"},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"password",class:"login-form-item"},{default:g((()=>[d(b,{modelValue:le.password,"onUpdate:modelValue":a[3]||(a[3]=e=>le.password=e),type:"password",placeholder:l.$t("lang.login.password"),class:"login-form-input","show-password":""},null,8,["modelValue","placeholder"])])),_:1}),d(y,null,{default:g((()=>[n("div",S,[a[21]||(a[21]=n("div",null,null,-1)),n("div",null,[d(x,{onClick:a[4]||(a[4]=e=>($("verification_free"),void window.location.reload())),type:"danger",style:{float:"right","margin-left":"10px","font-size":"12px"}},{default:g((()=>[w(u(l.$t("lang.login.clear_cache")),1)])),_:1}),d(x,{type:"danger",style:{float:"right","font-size":"12px"},onClick:a[5]||(a[5]=e=>ee.value="forgetPassword")},{default:g((()=>[w(u(l.$t("lang.login.forgot_password")),1)])),_:1})])])])),_:1}),d(y,null,{default:g((()=>[d(t,{class:"w-100 login-btn",type:"primary",onClick:ne},{default:g((()=>[w(u(l.$t("lang.login.login_btn")),1)])),_:1}),n("div",A,[d(t,{style:{float:"right"},class:"btn text-end text-end btn-link",onClick:a[6]||(a[6]=e=>ee.value="register")},{default:g((()=>[w(u(l.$t("lang.login.register_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):c("",!0),"register"==ee.value?(f(),m(k,{key:1,class:"login-card"},{default:g((()=>[n("h2",B,u(l.$t("lang.register.title")),1),d(V,{ref_key:"registerFormRef",ref:Y,model:se,rules:re,"label-width":"0px"},{default:g((()=>[d(y,{prop:"name"},{default:g((()=>[d(b,{modelValue:se.name,"onUpdate:modelValue":a[7]||(a[7]=e=>se.name=e),placeholder:l.$t("lang.register.name")},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"email"},{default:g((()=>[d(b,{modelValue:se.email,"onUpdate:modelValue":a[8]||(a[8]=e=>se.email=e),placeholder:l.$t("lang.register.email")},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"password"},{default:g((()=>[d(b,{modelValue:se.password,"onUpdate:modelValue":a[9]||(a[9]=e=>se.password=e),type:"password",placeholder:l.$t("lang.register.password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"repeatPassword"},{default:g((()=>[d(b,{modelValue:se.repeatPassword,"onUpdate:modelValue":a[10]||(a[10]=e=>se.repeatPassword=e),type:"password",placeholder:l.$t("lang.register.repeat_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"inviteCode"},{default:g((()=>[d(b,{modelValue:se.inviteCode,"onUpdate:modelValue":a[11]||(a[11]=e=>se.inviteCode=e),placeholder:l.$t("lang.register.invite_code")},null,8,["modelValue","placeholder"])])),_:1}),d(y,null,{default:g((()=>[d(t,{class:"w-100",type:"primary",onClick:ge},{default:g((()=>[w(u(l.$t("lang.register.register_btn")),1)])),_:1}),n("div",G,[d(t,{class:"btn text-end text-end btn-link",onClick:a[12]||(a[12]=e=>ee.value="login")},{default:g((()=>[w(u(l.$t("lang.register.login_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):c("",!0),"forgetPassword"==ee.value?(f(),m(k,{key:2,class:"login-card"},{default:g((()=>[n("h2",H,u(l.$t("lang.forgot.title")),1),n("p",J,u(l.$t("lang.forgot.description")),1),d(V,{ref:"foundPasswordFormRef",model:ae,rules:te,"label-width":"0px"},{default:g((()=>[d(y,{prop:"email"},{default:g((()=>[d(b,{modelValue:ae.email,"onUpdate:modelValue":a[13]||(a[13]=e=>ae.email=e),placeholder:l.$t("lang.forgot.email")},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"password"},{default:g((()=>[d(b,{modelValue:ae.password,"onUpdate:modelValue":a[14]||(a[14]=e=>ae.password=e),type:"password",placeholder:l.$t("lang.forgot.new_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),d(y,{prop:"newPassword"},{default:g((()=>[d(b,{modelValue:ae.newPassword,"onUpdate:modelValue":a[15]||(a[15]=e=>ae.newPassword=e),type:"password",placeholder:l.$t("lang.forgot.repeat_new_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),d(y,null,{default:g((()=>[d(t,{class:"w-100",type:"primary",onClick:de},{default:g((()=>[w(u(l.$t("lang.forgot.confirm_btn")),1)])),_:1}),n("div",K,[d(t,{class:"btn text-end text-end btn-link",onClick:a[16]||(a[16]=e=>ee.value="login")},{default:g((()=>[w(u(l.$t("lang.forgot.login_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):c("",!0)])])])])}}};export{N as default};
