/*! 
 Build based on gin-vue-admin 
 Time : 1754292185000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,l,a)=>new Promise(((t,r)=>{var o=e=>{try{u(a.next(e))}catch(l){r(l)}},s=e=>{try{u(a.throw(e))}catch(l){r(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,s);u((a=a.apply(e,l)).next())}));import{s,r as u,b as i,o as n,c as d,d as p,f as c,w as v,g as f,t as m,q as g,l as h,h as y}from"../gva/pixel-index.1754292185000.js";import{f as b}from"./pixel-format.1754292185000.js";import"./pixel-dictionary.1754292185000.js";const w={class:"gva-search-box"},_={class:"gva-table-box"},x={class:"gva-btn-list"},k={style:{"text-align":"right","margin-top":"8px"}},O={class:"popover-box"},z={key:1},C={class:"popover-box"},j={key:1},S={class:"gva-pagination"},V=Object.assign({name:"SysOperationRecord"},{setup(e){const V=u(1),P=u(0),I=u(10),R=u([]),U=u({}),N=()=>{U.value={}},D=()=>{V.value=1,I.value=10,""===U.value.status&&(U.value.status=null),A()},E=e=>{I.value=e,A()},q=e=>{V.value=e,A()},A=()=>o(this,null,(function*(){const e=yield(o=((e,o)=>{for(var s in o||(o={}))a.call(o,s)&&r(e,s,o[s]);if(l)for(var s of l(o))t.call(o,s)&&r(e,s,o[s]);return e})({page:V.value,pageSize:I.value},U.value),s({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:o}));var o;0===e.code&&(R.value=e.data.list,P.value=e.data.total,V.value=e.data.page,I.value=e.data.pageSize)}));A();const B=u(!1),J=u([]),L=e=>{J.value=e},T=()=>o(this,null,(function*(){const e=[];J.value&&J.value.forEach((l=>{e.push(l.ID)}));var l;0===(yield(l={ids:e},s({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(y({type:"success",message:"删除成功"}),R.value.length===e.length&&V.value>1&&V.value--,B.value=!1,A())})),F=e=>{try{return JSON.parse(e)}catch(l){return e}};return(e,l)=>{const a=i("el-input"),t=i("el-form-item"),r=i("el-button"),o=i("el-form"),s=i("el-popover"),u=i("el-table-column"),y=i("el-tag"),A=i("warning"),G=i("el-icon"),H=i("el-table"),K=i("el-pagination");return n(),d("div",null,[p("div",w,[c(o,{inline:!0,model:U.value},{default:v((()=>[c(t,{label:"请求方法"},{default:v((()=>[c(a,{modelValue:U.value.method,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),c(t,{label:"请求路径"},{default:v((()=>[c(a,{modelValue:U.value.path,"onUpdate:modelValue":l[1]||(l[1]=e=>U.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),c(t,{label:"结果状态码"},{default:v((()=>[c(a,{modelValue:U.value.status,"onUpdate:modelValue":l[2]||(l[2]=e=>U.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),c(t,null,{default:v((()=>[c(r,{size:"small",type:"primary",icon:"search",onClick:D},{default:v((()=>l[6]||(l[6]=[f("查询")]))),_:1}),c(r,{size:"small",icon:"refresh",onClick:N},{default:v((()=>l[7]||(l[7]=[f("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),p("div",_,[p("div",x,[c(s,{visible:B.value,"onUpdate:visible":l[5]||(l[5]=e=>B.value=e),placement:"top",width:"160"},{reference:v((()=>[c(r,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!J.value.length,onClick:l[4]||(l[4]=e=>B.value=!0)},{default:v((()=>l[10]||(l[10]=[f("删除")]))),_:1},8,["disabled"])])),default:v((()=>[l[11]||(l[11]=p("p",null,"确定要删除吗？",-1)),p("div",k,[c(r,{size:"small",type:"text",onClick:l[3]||(l[3]=e=>B.value=!1)},{default:v((()=>l[8]||(l[8]=[f("取消")]))),_:1}),c(r,{size:"small",type:"primary",onClick:T},{default:v((()=>l[9]||(l[9]=[f("确定")]))),_:1})])])),_:1},8,["visible"])]),c(H,{ref:"multipleTable",data:R.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:L},{default:v((()=>[c(u,{align:"left",type:"selection",width:"55"}),c(u,{align:"left",label:"操作人",width:"140"},{default:v((e=>[p("div",null,m(e.row.user.userName)+"("+m(e.row.user.nickName)+")",1)])),_:1}),c(u,{align:"left",label:"日期",width:"180"},{default:v((e=>[f(m(g(b)(e.row.CreatedAt)),1)])),_:1}),c(u,{align:"left",label:"状态码",prop:"status",width:"120"},{default:v((e=>[p("div",null,[c(y,{type:"success"},{default:v((()=>[f(m(e.row.status),1)])),_:2},1024)])])),_:1}),c(u,{align:"left",label:"请求IP",prop:"ip",width:"120"}),c(u,{align:"left",label:"请求方法",prop:"method",width:"120"}),c(u,{align:"left",label:"请求路径",prop:"path",width:"240"}),c(u,{align:"left",label:"请求",prop:"path",width:"80"},{default:v((e=>[p("div",null,[e.row.body?(n(),h(s,{key:0,placement:"left-start",trigger:"click"},{reference:v((()=>[c(G,{style:{cursor:"pointer"}},{default:v((()=>[c(A)])),_:1})])),default:v((()=>[p("div",O,[p("pre",null,m(F(e.row.body)),1)])])),_:2},1024)):(n(),d("span",z,"无"))])])),_:1}),c(u,{align:"left",label:"响应",prop:"path",width:"80"},{default:v((e=>[p("div",null,[e.row.resp?(n(),h(s,{key:0,placement:"left-start",trigger:"click"},{reference:v((()=>[c(G,{style:{cursor:"pointer"}},{default:v((()=>[c(A)])),_:1})])),default:v((()=>[p("div",C,[p("pre",null,m(F(e.row.resp)),1)])])),_:2},1024)):(n(),d("span",j,"无"))])])),_:1})])),_:1},8,["data"]),p("div",S,[c(K,{"current-page":V.value,"page-size":I.value,"page-sizes":[10,30,50,100],total:P.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:q,onSizeChange:E},null,8,["current-page","page-size","total"])])])])}}});export{V as default};
