/*! 
 Build based on melong-console 
 Time : 1754662730000 */
import{P as e,o as t,a,O as i,r as s,A as n,z as o,f as l,h as c,b as d,p as r,D as h,q as u,k as p,t as v,Q as g,_ as m,u as f,H as w,e as x,c as y,d as X,w as T,R as b,v as S}from"../assets/pixel-entry-index.1754662730000.js";import Y from"./pixel-index.17546627300004.js";import"./pixel-logo-tp.1754662730000.js";import"./pixel-screenfull.1754662730000.js";const B=["width","height"],C=["width","height"],I=["width","height"],M=[d("div",{class:"loading-gif_"},[d("span"),d("span"),d("span"),d("span"),d("span")],-1)],A={class:"auth-control_"},W={class:"range-text"},z=[d("div",null,null,-1),d("div",null,null,-1),d("div",null,null,-1)],H=e({__name:"App",props:{type:{type:String,default:"modal"},canvasWidth:{type:Number,default:310},canvasHeight:{type:Number,default:160},show:{type:Boolean,default:!1},puzzleScale:{type:Number,default:1},sliderSize:{type:Number,default:50},range:{type:Number,default:10},zIndex:{type:Number,default:999},imgs:{type:Array,default:null},successText:{type:String,default:"验证通过！"},failText:{type:String,default:"验证失败，请重试"},sliderText:{type:String,default:"拖动滑块完成拼图"},className:{type:String,default:""}},emits:["success","fail","close","reset"],setup(e,{expose:m,emit:f}){const w=e;t((()=>{document.addEventListener("mousemove",k,!1),document.addEventListener("mouseup",E,!1),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",E,!1),b.isInside="inside"===w.type,w.show&&(!b.isInside&&document.body.classList.add("vue-puzzle-overflow"),j())})),i((()=>{b.timer1&&clearTimeout(b.timer1),document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",E,!1),document.removeEventListener("touchmove",k,!1),document.removeEventListener("touchend",E,!1)}));const x=s(),y=s(),X=s(),T=s(),b=a({isInside:!1,mouseDown:!1,startWidth:50,startX:0,newX:0,pinX:0,pinY:0,loading:!1,isCanSlide:!1,error:!1,infoBoxShow:!1,infoText:"",infoBoxFail:!1,timer1:void 0,closeDown:!1,isSuccess:!1,imgIndex:-1,isSubmting:!1});n((()=>w.show),(e=>{e?(!b.isInside&&document.body.classList.add("vue-puzzle-overflow"),j()):(b.isSubmting=!1,b.isSuccess=!1,b.infoBoxShow=!1,document.body.classList.remove("vue-puzzle-overflow"))})),n((()=>w.type),(e=>{"inside"===e?(b.isInside=!0,document.body.classList.remove("vue-puzzle-overflow")):b.isInside=!1}));const S=o((()=>{const e=b.startWidth+b.newX-b.startX;return e<H.value?H.value:e>w.canvasWidth?w.canvasWidth:e})),Y=o((()=>Math.round(52.5*Math.max(Math.min(w.puzzleScale,2),.2)+6))),H=o((()=>Math.max(Math.min(Math.round(w.sliderSize),Math.round(.5*w.canvasWidth)),10))),L=o((()=>999!==w.zIndex?"z-index:".concat(w.zIndex):"")),D=()=>{b.isInside||(b.closeDown=!0)},P=()=>{b.closeDown&&(!b.mouseDown&&!b.isSubmting&&(b.timer1&&clearTimeout(b.timer1),f("close"))),b.closeDown=!1},R=e=>{var t;b.isCanSlide&&(b.mouseDown=!0,b.startWidth=(null==(t=x.value)?void 0:t.clientWidth)||0,b.newX=void 0!==e.clientX?e.clientX:e.changedTouches[0].clientX,b.startX=void 0!==e.clientX?e.clientX:e.changedTouches[0].clientX)},k=e=>{b.mouseDown&&(e.preventDefault(),b.newX=void 0!==e.clientX?e.clientX:e.changedTouches[0].clientX)},E=()=>{b.mouseDown&&(b.mouseDown=!1,U())},O=(e=!1)=>{var t;if(b.loading&&!e)return;b.loading=!0,b.isCanSlide=!1;const a=y.value,i=X.value,s=T.value,n=null==a?void 0:a.getContext("2d",{willReadFrequently:!0}),o=null==i?void 0:i.getContext("2d"),l=null==s?void 0:s.getContext("2d");if(!n||!o||!l)return void console.error("not found ctx / ctx2 / ctx3");const c=navigator.userAgent.indexOf("Firefox")>=0&&navigator.userAgent.indexOf("Windows")>=0,d=document.createElement("img");if(n.fillStyle="rgba(255,255,255,1)",l.fillStyle="rgba(255,255,255,1)",n.clearRect(0,0,w.canvasWidth,w.canvasHeight),o.clearRect(0,0,w.canvasWidth,w.canvasHeight),b.pinX=F(Y.value+20,w.canvasWidth-Y.value-10),b.pinY=F(20,w.canvasHeight-Y.value-10),d.crossOrigin="anonymous",d.onload=()=>{const[e,t,a,i]=_(d),s=Math.random(),r=Math.random(),h=Math.random(),u=s<.33?-1:s<.66?0:1,p=r<.33?-1:r<.66?0:1,v=h<.33?-1:h<.66?0:1;let g=Math.random()<.6?1:0;u===p&&p===v&&v===g&&0===g&&(g=1),n.save(),Q(n,u,p,v,g),n.closePath(),c?(n.clip(),n.save(),n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor="#000",n.shadowBlur=3,n.fill(),n.restore()):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor="#000",n.shadowBlur=3,n.fill(),n.clip()),n.drawImage(d,e,t,a,i),l.fillRect(0,0,w.canvasWidth,w.canvasHeight),l.drawImage(d,e,t,a,i),n.globalCompositeOperation="source-atop",Q(n,u,p,v,g),n.arc(b.pinX+Math.ceil(Y.value/2),b.pinY+Math.ceil(Y.value/2),1.2*Y.value,0,2*Math.PI,!0),n.closePath(),n.shadowColor="rgba(255, 255, 255, .8)",n.shadowOffsetX=-1,n.shadowOffsetY=-1,n.shadowBlur=Math.min(Math.ceil(8*w.puzzleScale),12),n.fillStyle="#ffffaa",n.fill();const m=n.getImageData(b.pinX-3,b.pinY-20,b.pinX+Y.value+5,b.pinY+Y.value+5);o.putImageData(m,0,b.pinY-20),n.restore(),n.clearRect(0,0,w.canvasWidth,w.canvasHeight),n.save(),Q(n,u,p,v,g),n.globalAlpha=.8,n.fillStyle="#ffffff",n.fill(),n.restore(),n.save(),n.globalCompositeOperation="source-atop",Q(n,u,p,v,g),n.arc(b.pinX+Math.ceil(Y.value/2),b.pinY+Math.ceil(Y.value/2),1.2*Y.value,0,2*Math.PI,!0),n.shadowColor="#000",n.shadowOffsetX=2,n.shadowOffsetY=2,n.shadowBlur=16,n.fill(),n.restore(),n.save(),n.globalCompositeOperation="destination-over",n.drawImage(d,e,t,a,i),n.restore(),b.loading=!1,b.isCanSlide=!0},d.onerror=()=>{O(!0)},!e&&null!=(t=w.imgs)&&t.length){let e=F(0,w.imgs.length-1);e===b.imgIndex&&(e===w.imgs.length-1?e=0:e++),b.imgIndex=e,d.src=w.imgs[e]}else d.src=Z()},F=(e,t)=>Math.ceil(Math.random()*(t-e)+e),_=e=>{const t=e.width/e.height;let a=0,i=0,s=0,n=0;return t>w.canvasWidth/w.canvasHeight?(n=w.canvasHeight,s=t*n,i=0,a=(w.canvasWidth-s)/2):(s=w.canvasWidth,n=s/t,a=0,i=(w.canvasHeight-n)/2),[a,i,s,n]},Q=(e,t,a,i,s)=>{const n=Math.ceil(15*w.puzzleScale);e.beginPath(),e.moveTo(b.pinX,b.pinY),e.lineTo(b.pinX+n,b.pinY),e.arcTo(b.pinX+n,b.pinY+t*n/2,b.pinX+n+n/2,b.pinY+t*n/2,n/2),e.arcTo(b.pinX+n+n,b.pinY+t*n/2,b.pinX+n+n,b.pinY,n/2),e.lineTo(b.pinX+n+n+n,b.pinY),e.lineTo(b.pinX+n+n+n,b.pinY+n),e.arcTo(b.pinX+n+n+n+a*n/2,b.pinY+n,b.pinX+n+n+n+a*n/2,b.pinY+n+n/2,n/2),e.arcTo(b.pinX+n+n+n+a*n/2,b.pinY+n+n,b.pinX+n+n+n,b.pinY+n+n,n/2),e.lineTo(b.pinX+n+n+n,b.pinY+n+n+n),e.lineTo(b.pinX+n+n,b.pinY+n+n+n),e.arcTo(b.pinX+n+n,b.pinY+n+n+n+i*n/2,b.pinX+n+n/2,b.pinY+n+n+n+i*n/2,n/2),e.arcTo(b.pinX+n,b.pinY+n+n+n+i*n/2,b.pinX+n,b.pinY+n+n+n,n/2),e.lineTo(b.pinX,b.pinY+n+n+n),e.lineTo(b.pinX,b.pinY+n+n),e.arcTo(b.pinX+s*n/2,b.pinY+n+n,b.pinX+s*n/2,b.pinY+n+n/2,n/2),e.arcTo(b.pinX+s*n/2,b.pinY+n,b.pinX,b.pinY+n,n/2),e.lineTo(b.pinX,b.pinY)},Z=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return console.error("not found ctx"),"";e.width=w.canvasWidth,e.height=w.canvasHeight,t.fillStyle="rgb(".concat(F(100,255),",").concat(F(100,255),",").concat(F(100,255),")"),t.fillRect(0,0,w.canvasWidth,w.canvasHeight);for(let a=0;a<12;a++)if(t.fillStyle="rgb(".concat(F(100,255),",").concat(F(100,255),",").concat(F(100,255),")"),t.strokeStyle="rgb(".concat(F(100,255),",").concat(F(100,255),",").concat(F(100,255),")"),F(0,2)>1)t.save(),t.rotate(F(-90,90)*Math.PI/180),t.fillRect(F(-20,e.width-20),F(-20,e.height-20),F(10,e.width/2+10),F(10,e.height/2+10)),t.restore();else{t.beginPath();const a=F(-Math.PI,Math.PI);t.arc(F(0,e.width),F(0,e.height),F(10,e.height/2+10),a,a+1.5*Math.PI),t.closePath(),t.fill()}return e.toDataURL("image/png")},U=()=>{b.isSubmting=!0;const e=S.value-H.value-(Y.value-H.value)*((S.value-H.value)/(w.canvasWidth-H.value)),t=b.pinX-3-e;Math.abs(t)<w.range?(b.infoText=w.successText,b.infoBoxFail=!1,b.infoBoxShow=!0,b.isCanSlide=!1,b.isSuccess=!0,b.timer1&&clearTimeout(b.timer1),b.timer1=setTimeout((()=>{b.isSubmting=!1,f("success",t,{deviation:t,offsetX:e,pinX:b.pinX-3})}),800)):(b.infoText=w.failText,b.infoBoxFail=!0,b.infoBoxShow=!0,b.isCanSlide=!1,f("fail",t,{deviation:t,offsetX:e,pinX:b.pinX-3}),b.timer1&&clearTimeout(b.timer1),b.timer1=setTimeout((()=>{b.isSubmting=!1,j()}),800))},j=e=>{b.isSubmting||(b.infoBoxFail=!1,b.infoBoxShow=!1,b.isCanSlide=!1,b.isSuccess=!1,b.startWidth=H.value,b.startX=0,b.newX=0,O(),e&&f("reset"))};return m({reset:j}),(t,a)=>(c(),l(g,{to:"body",disabled:b.isInside},[d("div",{class:u(["vue-puzzle-vcode",{inside_:b.isInside,show_:e.show},e.className]),style:h(p(L)),onMousedown:D,onMouseup:P,onTouchstartPassive:D,onTouchend:P},[d("div",{class:"vue-auth-box_",onMousedown:a[3]||(a[3]=r((()=>{}),["stop"])),onTouchstart:a[4]||(a[4]=r((()=>{}),["stop"]))},[d("div",{class:"auth-body_",style:h("width:".concat(e.canvasWidth,"px;height: ").concat(e.canvasHeight,"px"))},[d("canvas",{ref_key:"canvas1",ref:y,class:"auth-canvas1_",width:e.canvasWidth,height:e.canvasHeight},null,8,B),d("canvas",{ref_key:"canvas3",ref:T,class:u(["auth-canvas3_",{show:b.isSuccess}]),width:e.canvasWidth,height:e.canvasHeight},null,10,C),d("canvas",{ref_key:"canvas2",ref:X,class:"auth-canvas2_",width:p(Y),height:e.canvasHeight,style:h("width:".concat(p(Y),"px;height:").concat(e.canvasHeight,"px;transform:translateX(").concat(p(S)-p(H)-(p(Y)-p(H))*((p(S)-p(H))/(e.canvasWidth-p(H))),"px)"))},null,12,I),d("div",{class:u(["loading-box_",{hide_:!b.loading}])},M,2),d("div",{class:u(["info-box_",{show:b.infoBoxShow},{fail:b.infoBoxFail}])},v(b.infoText),3),d("div",{class:u(["flash_",{show:b.isSuccess}]),style:h("transform: translateX(".concat(b.isSuccess?"".concat(e.canvasWidth+.578*e.canvasHeight,"px"):"-".concat(.578*e.canvasHeight,"px"),") skew(-30deg, 0);"))},null,6),d("img",{class:"reset_",onClick:a[0]||(a[0]=e=>j(!0)),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAELklEQVRYR+2YW2wUZRTH//9vtlCoF9IoIklT3PqgPGi326hoetuaGEhIr9SgCYkkgt2WGOQVCca+GavWdr0GjD4YhG3RB3hply1LQA1tEQIxEXapGI2pEkys9LIzx2ylYWfY6e5sF0oi+7hzzvl+3/9855xvhrjNf7zN+XAHcL4Z+n8o6JWTeYt++W25S596AIZy6TB+n3yo+Nchlk8vmIIVowdXU9c3Q1gDSilBlQwjgBAYFGDvdF58/4milqvZwDpOcXWsb5Uh8hmBqkwXFMhlCN8aX5LXNbRy/T+Z+iXsHAFWRXs3QGQPyLucLDJrK5DgUXdTsxPfjAEro8E3Ce50EtxsKxPTwCPH3U2jTmJkBJgWTnAMxDeGMEoa0xQ+LJQnCD4HYFkCyAC3RdwN3U7gMkpxRTTYrMD91sCJIgCxV5R6O1Jcfy7VwonqLoj9/CqB2kF341qncGkBvRe+ureAWpRgoalCBecMFzcdK24YymZRJz5zprgq1tsJwXYL3CVZGvdGHmwZc7JQtra2gE+f712ep2QUYP714DJhaJrXLqXZQszlZwtYdSHoB9ljVk/ePVrSZFL0ZkAlxzQBVseCT8WhZhRThtFB8plk9Zi/qCi8cv0fNxvKFrDy4oF11NXXIFy2EII4iBcG3Y03VLZT8OqRd5aFPduvOEpxRayvXolxAKB2g6NgEhobBlc1HHYKY7WvHf5wtVAPgegIlbbZ9seUZ7AyFnwewi9pGoUyDmhrB931kfnC1ZwOeKlLP8GZJi6QLSFP2yep4toXSbT3ZQAfX3O6omt8Nhd9r/aHQAUMOQywYBZo5uZD2ThQ2rbPCjlnH6yI9rUryE5DU75ctJaake46Be4DuDjF8dFBNA94/AdtiySVxIlpMlTS8td801o70vMigM9huTda2lhcKHVHPO2HZv/P6LIwX7hk/+qzPSvUJGMkrg8AQYTkroRdXMlE+HH/twsG6BsOdJHYZlaO/lBZ6weOiiSXqs3Gqj0TeAxx+T75DIpgwjC0onD51pQD4JaluPrkR/cpFT9DcoVp84LOgTL/DjtBbglgou+puHwB8lEznPxJw1XSX77VtgizBvQNBw4RMqB7xt4Lc3c8lQKJaQHoO4R8ydz0/7MWoCXk8c85MrMC9J3qaafw/WtQlwXST+F3BnAeYB4obgJ1BJIuG+YtiKAjVOZ/Pd1ZdwzoG+4uBtSPpjaRbhXLcwF3hzytb2TilgVgT5BkYybBrTYC+Rvg5nRpdTRJrIs8+VPXPQXj2i4ItxC4O2NQQUQnN4U9rRcz9nH64p4ceM2lziX5Y4s3KHCdUHwE77ecMkMEp6BwhIa2Z6DslZRvfulgHafYLuCas58WLp2aLCFUga70qxOFU6dPFL2W1feYeaU43Y5z/TxnCuYabMEuC043ckdBp4pZ7f8FE5psOI1g6fwAAAAASUVORK5CYII="})],4),d("div",A,[d("div",{class:"range-box",style:h("height:".concat(p(H),"px;width:").concat(e.canvasWidth,"px"))},[d("div",W,v(e.sliderText),1),d("div",{class:"range-slider",ref_key:"rangeSlider",ref:x,style:h("width:".concat(p(S),"px"))},[d("div",{class:u(["range-btn",{isDown:b.mouseDown}]),style:h("width:".concat(p(H),"px")),onMousedown:a[1]||(a[1]=e=>R(e)),onTouchstart:a[2]||(a[2]=e=>R(e))},z,38)],4)],4)])],32)],38)],8,["disabled"]))}}),L=""+new URL("../assets/pixel-11.1754662730000.jpeg",import.meta.url).href,D=""+new URL("../assets/pixel-12.1754662730000.jpg",import.meta.url).href,P={class:"w-100 h-100"},R={class:"bg-white rounded-2 login-form"},k={class:"mb-3",style:{height:"64px"}},E={style:{height:"64px"}},O={class:"verify"},F=["disabled"],_=m({__name:"index",setup(e){const t=a({email:"",password:"",captchaId:"",captcha:0}),i=s(!1),n=o((()=>document.body.clientWidth<504?document.body.clientWidth-100:404));a({imgUrl:"https://i.pinimg.com/originals/e7/e7/c3/e7e7c37d49d40b043029a147e1158843.jpg",isShowSelf:!0,width:300,height:180,sText:"sText",eText:"eText",isBorder:!0,isCloseBtn:!0,isReloadBtn:!0,isParentNode:!1,isShowTip:!0});const l=[L,D],r=s(!0),h=(e,a)=>{b().then((a=>{0===a.code&&(t.captcha=a.data.captcha,t.captchaId=a.data.id,t.captcha=e*t.captcha)})),i.value=!0,document.getElementsByClassName("auth-body_")[0].style.display="none"},u=f(),v=s(),g=async()=>{await u.LoginIn(t)||(v.value.reset(),i.value=!1,document.getElementsByClassName("auth-body_")[0].style.display="")},m=()=>{S.push({name:"forgetPassword"})},B=s(!1);return w.on("mobile",(e=>{B.value=e})),(e,a)=>{const s=x("el-header"),o=x("el-input"),u=x("el-col"),f=x("el-row");return c(),y("div",P,[X(s,{class:"bg-white",style:{"min-height":"80px"}},{default:T((()=>[X(Y)])),_:1}),X(f,{class:"w-100 h-100 justify-content-center align-items-center"},{default:T((()=>[X(u,{xs:24,sm:24,md:24,class:"justify-content-center align-items-center w-100",style:{"max-width":"504px",padding:"0 20px"}},{default:T((()=>[d("div",R,[a[4]||(a[4]=d("h1",{class:"fs-1 d-flex justify-content-center align-items-center login-title"},[d("span",null,"Login")],-1)),d("div",null,[d("div",k,[a[2]||(a[2]=d("div",{class:"mb-1"},"Email Address",-1)),X(o,{modelValue:t.email,"onUpdate:modelValue":a[0]||(a[0]=e=>t.email=e),required:""},null,8,["modelValue"])]),d("div",E,[a[3]||(a[3]=d("div",{class:"mb-1"},"Password",-1)),X(o,{modelValue:t.password,"onUpdate:modelValue":a[1]||(a[1]=e=>t.password=e),type:"password",required:"",clearable:"",autocomplete:"new-password"},null,8,["modelValue"])]),d("div",O,[X(p(H),{ref_key:"vcode",ref:v,show:r.value,type:"inside",imgs:l,sliderSize:40,canvasWidth:n.value,successText:"success",failText:"failed",sliderText:"drag to completed",onSuccess:h},null,8,["show","canvasWidth"])]),d("div",null,[d("button",{disabled:!i.value,onClick:g,class:"w-100 text-center mt-3 btn-danger btn"},"Login",8,F),d("div",{class:"w-100 justify-content-end d-flex"},[d("button",{onClick:m,class:"text-danger btn btn-link text-decoration-none"},"forget your password?")])])])])])),_:1})])),_:1})])}}},[["__scopeId","data-v-56986f2a"]]);export{_ as default};
