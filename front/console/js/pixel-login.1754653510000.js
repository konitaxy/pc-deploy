/*! 
 Build based on melong-console 
 Time : 1754653510000 */
import{l as e}from"./pixel-logo.1754653510000.js";import{r as l,a,o,i as s,u as t,c as r,b as d,d as n,w as i,e as g,t as u,f as p,g as c,h as m,j as f,k as w,E as v,l as h,m as _,s as b}from"../assets/pixel-entry-index.1754653510000.js";import{v as y,a as x}from"./pixel-validates.1754653510000.js";import{g as V,d as $,s as k}from"./pixel-format.1754653510000.js";const C=""+new URL("../assets/pixel-cards_login_new.1754653510000.png",import.meta.url).href,P={class:"container-fluid"},D={class:"position-absolute top-0 p-3",style:{right:"100px"}},I={class:"raw align-items-end d-flex"},U={class:"col col-6 vh100"},j={class:"left-container"},T={class:"slogan text-left"},z={class:"mb-2"},R={class:"mb-2 text-highlight"},q={class:"mb-2"},E={class:"mb-2 text-highlight"},S={class:"col col-6 vh100"},F={class:"right-side"},L={class:"mb-3 fs-5"},M={class:"justify-content-between w-100 d-flex"},A={class:"w-100"},B={class:"mb-3 fs-5"},G={class:"w-100"},H={class:"mb-3 fs-5"},J={class:"text-secondary",style:{"font-size":"small"}},K={class:"w-100"},N={__name:"login",setup(N){const O=l(!1),Q=l(),W=l(),X=a({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:y,message:"邮箱格式错误",trigger:"blur"}]}),Y=l("login"),Z=a({email:"",password:"",authMethod:2,phone:"",code:"",verifyCode:"",remember:!1}),ee=a({email:"",password:"",newPassword:""}),le=a({email:"",name:"",repeatPassword:"",password:"",phone:"",verifyCode:"",inviteCode:""}),ae=e=>{window.localStorage.setItem("global.lang",e),s.global.locale.value=e};o((()=>{let e=window.localStorage.getItem("global.lang");e&&(s.global.locale.value=e);V("verification_free")&&(O.value=!0)}));const oe=l(),se=a({email:[{validator:y,trigger:"blur"}],password:[{validator:x,trigger:"blur"}],newPassword:[{validator:(e,l,a)=>{l!==ee.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]}),te=a({name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:6,max:20,message:"请输入6-20位字符",trigger:"blur"},{whitespace:!0,message:"不能只为空格",trigger:"blur"}],email:[{validator:y,trigger:"blur"}],password:[{validator:x,trigger:"blur"}],repeatPassword:[{validator:(e,l,a)=>{l!==le.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],inviteCode:[{required:!0,message:"请输入邀请码",trigger:"blur"},{len:6,message:"请输入6位字符",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"请输入6位字符",trigger:"blur"}]}),re=t(),de=async()=>{await Q.value.validate()&&re.LoginIn(Z).then((e=>{e&&Z.remember&&k("verification_free","yes",30)}))},ne=async()=>{await oe.value.validate()&&_(ee).then((e=>{0===e.code&&(v.success("Reset password success"),Y.value="login")}))},ie=async()=>{await W.value.validate()&&(le.password==le.repeatPassword?h(le).then((e=>{0===e.code&&(Y.value="login",v.success("注册成功"))})):v.error("two password not same"))},ge=a({email:"",password:"",newPassword:"",verifyCode:"",disable:!1,sendText:"Send code",intervalID:null,countdown:60,lastDateTime:Date.now()}),ue=async(e,l)=>{null===ge.intervalID&&(ge.intervalID=-1,b({to:e,type:l}).then((e=>{0===e.code?(v.success("Send success"),ge.lastTime=Date.now(),ge.intervalID=setInterval((()=>{const e=Date.now()-ge.lastTime;ge.lastTime=Date.now(),ge.countdown-=Math.floor(e/1e3),ge.sendText="Resend code "+ge.countdown,ge.countdown<=0&&(clearInterval(ge.intervalID),ge.intervalID=null,ge.countdown=60,ge.sendText="Send code")}),1e3)):ge.intervalID=null})))};return(l,a)=>{const o=g("arrow-down"),t=g("el-icon"),v=g("el-button"),h=g("el-dropdown-item"),_=g("el-dropdown-menu"),b=g("el-dropdown"),y=g("el-input"),x=g("el-form-item"),V=g("el-checkbox"),k=g("el-link"),N=g("el-form"),re=g("el-card"),pe=g("el-col"),ce=g("el-row");return m(),r("div",P,[d("div",D,[n(b,{class:"me-2","popper-class":"px-2"},{dropdown:i((()=>[n(_,null,{default:i((()=>[n(h,{onClick:a[0]||(a[0]=e=>ae("zh")),class:"justify-content-center"},{default:i((()=>a[20]||(a[20]=[f("中文")]))),_:1}),n(h,{onClick:a[1]||(a[1]=e=>ae("en")),class:"justify-content-center"},{default:i((()=>a[21]||(a[21]=[f("English")]))),_:1})])),_:1})])),default:i((()=>[n(v,{type:"text",style:{"min-width":"100px"}},{default:i((()=>[f(u("zh"==w(s).locale?"中文":"English"),1),n(t,{class:"el-icon--right"},{default:i((()=>[n(o)])),_:1})])),_:1})])),_:1})]),d("div",I,[d("div",U,[d("div",j,[a[23]||(a[23]=d("div",{class:"logo text-center"},[d("img",{src:e,alt:"Logo",class:"logo"})],-1)),d("div",T,[d("h1",z,u(l.$t("lang.login.slogan.line1")),1),d("h1",R,u(l.$t("lang.login.slogan.line2")),1),d("h1",q,u(l.$t("lang.login.slogan.line3")),1),d("h1",E,u(l.$t("lang.login.slogan.line4")),1),a[22]||(a[22]=d("div",{class:"left-main-image text-center"},[d("img",{src:C,alt:"Main",class:"main-image"})],-1))])])]),d("div",S,[d("div",F,["login"==Y.value?(m(),p(re,{key:0,class:"login-card login-form"},{default:i((()=>[d("h2",L,u(l.$t("lang.login.title")),1),n(N,{ref_key:"loginFormRef",ref:Q,model:Z,rules:X,"label-width":"0px"},{default:i((()=>[n(x,{prop:"email",class:"login-form-item"},{default:i((()=>[n(y,{modelValue:Z.email,"onUpdate:modelValue":a[2]||(a[2]=e=>Z.email=e),placeholder:l.$t("lang.login.email"),class:"login-form-input"},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"password",class:"login-form-item"},{default:i((()=>[n(y,{modelValue:Z.password,"onUpdate:modelValue":a[3]||(a[3]=e=>Z.password=e),type:"password",placeholder:l.$t("lang.login.password"),class:"login-form-input","show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,null,{default:i((()=>[d("div",M,[d("div",null,[O.value?c("",!0):(m(),p(V,{key:0,modelValue:Z.remember,"onUpdate:modelValue":a[4]||(a[4]=e=>Z.remember=e),style:{"font-size":"12px"}},{default:i((()=>[f(u(l.$t("lang.login.remember_me")),1)])),_:1},8,["modelValue"]))]),d("div",null,[n(k,{onClick:a[5]||(a[5]=e=>($("verification_free"),void window.location.reload())),type:"danger",style:{float:"right","margin-left":"10px","font-size":"12px"}},{default:i((()=>[f(u(l.$t("lang.login.clear_cache")),1)])),_:1}),n(k,{type:"danger",style:{float:"right","font-size":"12px"},onClick:a[6]||(a[6]=e=>Y.value="forgetPassword")},{default:i((()=>[f(u(l.$t("lang.login.forgot_password")),1)])),_:1})])])])),_:1}),n(x,null,{default:i((()=>[n(v,{class:"w-100 login-btn",type:"primary",onClick:de},{default:i((()=>[f(u(l.$t("lang.login.login_btn")),1)])),_:1}),d("div",A,[n(v,{style:{float:"right"},class:"btn text-end text-end btn-link",onClick:a[7]||(a[7]=e=>Y.value="register")},{default:i((()=>[f(u(l.$t("lang.login.register_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):c("",!0),"register"==Y.value?(m(),p(re,{key:1,class:"login-card"},{default:i((()=>[d("h2",B,u(l.$t("lang.register.title")),1),n(N,{ref_key:"registerFormRef",ref:W,model:le,rules:te,"label-width":"0px"},{default:i((()=>[n(x,{prop:"name"},{default:i((()=>[n(y,{modelValue:le.name,"onUpdate:modelValue":a[8]||(a[8]=e=>le.name=e),placeholder:l.$t("lang.register.name")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"email"},{default:i((()=>[n(y,{modelValue:le.email,"onUpdate:modelValue":a[9]||(a[9]=e=>le.email=e),placeholder:l.$t("lang.register.email")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"password"},{default:i((()=>[n(y,{modelValue:le.password,"onUpdate:modelValue":a[10]||(a[10]=e=>le.password=e),type:"password",placeholder:l.$t("lang.register.password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"repeatPassword"},{default:i((()=>[n(y,{modelValue:le.repeatPassword,"onUpdate:modelValue":a[11]||(a[11]=e=>le.repeatPassword=e),type:"password",placeholder:l.$t("lang.register.repeat_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"inviteCode"},{default:i((()=>[n(y,{modelValue:le.inviteCode,"onUpdate:modelValue":a[12]||(a[12]=e=>le.inviteCode=e),placeholder:l.$t("lang.register.invite_code")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"verifyCode"},{default:i((()=>[n(ce,{gutter:20,style:{padding:"0"}},{default:i((()=>[n(pe,{span:16},{default:i((()=>[n(y,{required:"",modelValue:le.verifyCode,"onUpdate:modelValue":a[13]||(a[13]=e=>le.verifyCode=e),placeholder:l.$t("lang.register.verify_code")},null,8,["modelValue","placeholder"])])),_:1}),n(pe,{span:8},{default:i((()=>[n(v,{disabled:null!=ge.intervalID,style:{padding:"8px 17px"},type:"primary",onClick:a[14]||(a[14]=e=>{ue(le.email,"registerVerify")})},{default:i((()=>[f(u(ge.sendText),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),n(x,null,{default:i((()=>[n(v,{class:"w-100",type:"primary",onClick:ie},{default:i((()=>[f(u(l.$t("lang.register.register_btn")),1)])),_:1}),d("div",G,[n(v,{class:"btn text-end text-end btn-link",onClick:a[15]||(a[15]=e=>Y.value="login")},{default:i((()=>[f(u(l.$t("lang.register.login_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):c("",!0),"forgetPassword"==Y.value?(m(),p(re,{key:2,class:"login-card"},{default:i((()=>[d("h2",H,u(l.$t("lang.forgot.title")),1),d("p",J,u(l.$t("lang.forgot.description")),1),n(N,{ref_key:"foundPasswordFormRef",ref:oe,model:ee,rules:se,"label-width":"0px"},{default:i((()=>[n(x,{prop:"email"},{default:i((()=>[n(y,{modelValue:ee.email,"onUpdate:modelValue":a[16]||(a[16]=e=>ee.email=e),placeholder:l.$t("lang.forgot.email")},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"password"},{default:i((()=>[n(y,{modelValue:ee.password,"onUpdate:modelValue":a[17]||(a[17]=e=>ee.password=e),type:"password",placeholder:l.$t("lang.forgot.new_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,{prop:"newPassword"},{default:i((()=>[n(y,{modelValue:ee.newPassword,"onUpdate:modelValue":a[18]||(a[18]=e=>ee.newPassword=e),type:"password",placeholder:l.$t("lang.forgot.repeat_new_password"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1}),n(x,null,{default:i((()=>[n(v,{class:"w-100",type:"primary",onClick:ne},{default:i((()=>[f(u(l.$t("lang.forgot.confirm_btn")),1)])),_:1}),d("div",K,[n(v,{class:"btn text-end text-end btn-link",onClick:a[19]||(a[19]=e=>Y.value="login")},{default:i((()=>[f(u(l.$t("lang.forgot.login_link")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):c("",!0)])])])])}}};export{N as default};
