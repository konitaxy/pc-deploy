/*! 
 Build based on gin-vue-admin 
 Time : 1754201962000 */
import{a as e,b as l,s as a,c as t,d,f as o}from"./pixel-finance.1754201962000.js";import{f as u}from"./pixel-format.1754201962000.js";import{_ as n,r as i,a as s,y as p,b as r,o as f,c,f as m,w as g,d as b,g as v,t as _,l as y,e as C,G as V,H as F,q as h,h as T}from"../gva/pixel-index.1754201962000.js";import"./pixel-dictionary.1754201962000.js";const x={class:"p-2"},U={style:{float:"right","margin-bottom":"10px"}},k={key:0},D={key:1},w={class:"mt-4"},B={style:{float:"right","margin-bottom":"10px"}},z={key:0},N={key:1},A={class:"mt-4"},S={class:"dialog-footer"},I={class:"dialog-footer"},R={class:"row bg-body-secondary p-2 mx-2"},G={class:"col-6 text-center"},j={class:"col-4 offset-2"},E={class:"row p-2 mt-4 mx-2",style:{border:"1px solid #ddd","border-top":"none"}},L={key:0,class:"col-4 offset-1"},O={class:"fw-bold"},M={key:1,class:"col-4 offset-1"},P={class:"fw-bold"},W={class:"row p-2 mx-2 mt-4"},q={class:"mt-1"};var H=n({__name:"index",setup(n){const H=[{label:"Wallet Inbound",value:"WALLET_INBOUND"}],Y=i("userFeeConfig"),J=s({cardBin:"",feeType:"WALLET_INBOUND",cfgType:2,cardBin:"All",cardType:"",cardBinId:"",page:1,pageSize:10,total:0}),K=i({feeType:"WALLET_INBOUND",cardBin:"",cardType:"",minFee:0,maxFee:0,feeRate:0,fixedFee:0}),Q=()=>{J.cardBin="",J.feeType="WALLET_INBOUND",J.cardBin="All",J.cardType="",J.cardBinId="",J.status=null},X=()=>{K.value={feeType:"",cardBin:"",cardType:"",minFee:0,maxFee:0,feeRate:0,fixedFee:0}},Z=()=>{a({id:ne.value.ID}).then((e=>{T.success("Success"),ne.value.available=!1}))},$=()=>{t(K.value).then((e=>{0===e.code&&(T.success("Success"),pe.addFeeGlobalCfgDialog=!1,fe())}))},ee=()=>{d(K.value).then((e=>{0===e.code&&(T.success("Success"),pe.addFeeUserCfgDialog=!1,fe(),ne.value.available=!0)}))};p((()=>{fe()}));const le=i([]),ae=i("CREATE_CARD"),te=i([]),de=i(),oe=s({page:1,pageSize:10,total:0}),ue=e=>{if(null==e)return oe.total=0,void(oe.page=1);oe.objId=e.ID,oe.opType=4,o(oe).then((e=>{0===e.code&&(te.value=e.data.list,oe.total=e.data.total)}))},ne=i({}),ie=e=>{ae.value=e;const l=se(e);ne.value={},te.value=[],l.length>0?(ne.value=l[0],ue(l[0])):ue()},se=e=>le.value.filter((l=>l.feeType===e)),pe=s({addFeeGlobalCfgDialog:!1,addFeeUserCfgDialog:!1,addFeeUserCfgMultiDialog:!1}),re=i([]),fe=()=>{"globalFeeConfig"==Y.value?e(J).then((e=>{0===e.code&&(re.value=e.data.list,J.total=e.data.total,ne.value=se(ae.value))})):l(J).then((e=>{0===e.code&&(re.value=e.data.list,J.total=e.data.total)}))},ce=e=>{Y.value=e,fe()},me=e=>e.toLowerCase().split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),ge=()=>{fe()},be=e=>{J.pageSize=e,fe()},ve=e=>{J.page=e,fe()},_e=e=>{oe.pageSize=e,ue(de.value)},ye=e=>{oe.page=e,fe()},Ce=(e,l)=>{K.value=e,2==l?pe.addFeeUserCfgDialog=!0:pe.addFeeGlobalCfgDialog=!0};return(e,a)=>{const d=r("el-option"),o=r("el-select"),n=r("el-form-item"),i=r("el-input"),s=r("el-button"),p=r("el-form"),T=r("el-table-column"),ue=r("el-tag"),se=r("el-table"),Ve=r("el-pagination"),Fe=r("el-tab-pane"),he=r("el-col"),Te=r("el-row"),xe=r("el-tabs"),Ue=r("el-input-number"),ke=r("el-dialog"),De=r("el-radio"),we=r("el-radio-group");return f(),c("div",x,[m(xe,{modelValue:Y.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Y.value=e),class:"mb-4",onTabChange:ce},{default:g((()=>[m(Fe,{label:"Global fee config",name:"globalFeeConfig"},{default:g((()=>[b("div",null,[m(p,{inline:!0,class:"mb-4","label-position":"top"},{default:g((()=>[m(n,{label:"Status"},{default:g((()=>[m(o,{modelValue:J.status,"onUpdate:modelValue":a[0]||(a[0]=e=>J.status=e),clearable:"",style:{width:"150px"}},{default:g((()=>[m(d,{label:"Enable",value:1}),m(d,{label:"Disable",value:2})])),_:1},8,["modelValue"])])),_:1}),m(n,{label:"Card Bin"},{default:g((()=>[m(i,{modelValue:J.cardBin,"onUpdate:modelValue":a[1]||(a[1]=e=>J.cardBin=e),placeholder:"Please enter card bin"},null,8,["modelValue"])])),_:1}),m(n,{label:"Card Type"},{default:g((()=>[m(i,{modelValue:J.cardType,"onUpdate:modelValue":a[2]||(a[2]=e=>J.cardType=e),placeholder:"Please enter card type"},null,8,["modelValue"])])),_:1}),m(n,{label:" "},{default:g((()=>[m(s,{type:"primary",onClick:ge},{default:g((()=>a[24]||(a[24]=[v("Search")]))),_:1}),m(s,{onClick:Q},{default:g((()=>a[25]||(a[25]=[v("Reset")]))),_:1})])),_:1})])),_:1}),b("div",U,[m(s,{type:"primary",icon:"plus",onClick:a[3]||(a[3]=e=>{pe.addFeeGlobalCfgDialog=!0,X()})},{default:g((()=>a[26]||(a[26]=[v("Add")]))),_:1})]),m(se,{data:re.value,style:{width:"100%"}},{default:g((()=>[m(T,{prop:"feeType",label:"Fee Type"},{default:g((({row:e})=>[v(_(me(e.feeType)),1)])),_:1}),m(T,{prop:"cardBin",label:"Card Bin"}),m(T,{prop:"cardModel",label:"Card Model"}),m(T,{prop:"fee",label:"Fee"},{default:g((({row:e})=>[2==e.calType?(f(),c("span",k,_(e.fee),1)):(f(),c("span",D,_(e.fee)+"%",1))])),_:1}),m(T,{prop:"status",label:"status"},{default:g((e=>[1==e.row.status?(f(),y(ue,{key:0,type:"success"},{default:g((()=>a[27]||(a[27]=[v("Active")]))),_:1})):C("",!0),2==e.row.status?(f(),y(ue,{key:1,type:"danger"},{default:g((()=>a[28]||(a[28]=[v("Disable")]))),_:1})):C("",!0)])),_:1}),m(T,{label:"Operate"},{default:g((({row:e})=>[m(s,{size:"small",type:"text",onClick:l=>Ce(e)},{default:g((()=>a[29]||(a[29]=[v("Edit")]))),_:2},1032,["onClick"]),m(s,{size:"small",type:"text",onClick:l=>((e,l)=>{e.status=l,t(e).then((e=>{fe()}))})(e,1==e.status?2:1)},{default:g((()=>[v(_(1==e.status?"Disable":"Active"),1)])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),b("div",w,[m(Ve,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:J.total,"page-size":J.pageSize,"current-page":J.page,onSizeChange:be,onCurrentChange:ve},null,8,["total","page-size","current-page"])])])])),_:1}),m(Fe,{label:"User fee config",name:"userFeeConfig"},{default:g((()=>[b("div",null,[m(p,{inline:!0,"label-position":"top",model:J,class:"demo-form-inline"},{default:g((()=>[m(Te,{gutter:20},{default:g((()=>[m(he,{span:12},{default:g((()=>[m(n,{label:"Client No"},{default:g((()=>[m(i,{modelValue:J.clientNo,"onUpdate:modelValue":a[4]||(a[4]=e=>J.clientNo=e),placeholder:"Please enter client No"},null,8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12},{default:g((()=>[m(n,{label:" "},{default:g((()=>[m(s,{type:"primary",onClick:fe},{default:g((()=>a[30]||(a[30]=[v("Search")]))),_:1}),m(s,{onClick:Q},{default:g((()=>a[31]||(a[31]=[v("Reset")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),b("div",B,[m(s,{type:"primary",icon:"plus",onClick:a[5]||(a[5]=e=>{pe.addFeeUserCfgDialog=!0,X()})},{default:g((()=>a[32]||(a[32]=[v("Add")]))),_:1})]),m(se,{data:re.value,style:{width:"100%"},border:""},{default:g((()=>[m(T,{prop:"clientNo",label:"Client No",width:"180"}),m(T,{prop:"cardBin",label:"Card Bin"}),m(T,{prop:"feeType",label:"Fee Type"},{default:g((({row:e})=>[v(_(me(e.feeType)),1)])),_:1}),m(T,{prop:"fee",label:"Fee"},{default:g((({row:e})=>[2==e.calType?(f(),c("span",z,_(e.fee),1)):(f(),c("span",N,_(e.fee)+"%",1))])),_:1}),m(T,{label:"Operate",width:"100"},{default:g((({row:e})=>[m(s,{size:"small",type:"text",onClick:a=>(e=>{de.value=e,l({clientNo:e.clientNo,page:1,pageSize:999}).then((l=>{0===l.code&&(ae.value=e.feeType,le.value=l.data.list,ie(e.feeType),pe.addFeeUserCfgMultiDialog=!0)}))})(e)},{default:g((()=>a[33]||(a[33]=[v("View")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),b("div",A,[m(Ve,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:J.total,"page-size":J.pageSize,"current-page":J.page,onSizeChange:be,onCurrentChange:ve},null,8,["total","page-size","current-page"])])])])),_:1})])),_:1},8,["modelValue"]),m(ke,{modelValue:pe.addFeeGlobalCfgDialog,"onUpdate:modelValue":a[12]||(a[12]=e=>pe.addFeeGlobalCfgDialog=e),title:"Set global Cfg",width:"80%",style:{"max-width":"600px"}},{footer:g((()=>[b("span",S,[m(s,{onClick:a[11]||(a[11]=e=>pe.addFeeGlobalCfgDialog=!1)},{default:g((()=>a[35]||(a[35]=[v("Cancel")]))),_:1}),m(s,{type:"primary",onClick:$},{default:g((()=>a[36]||(a[36]=[v("Confirm")]))),_:1})])])),default:g((()=>[m(p,{model:K.value,"label-position":"top","label-width":"160px"},{default:g((()=>[m(Te,{gutter:20},{default:g((()=>[m(he,{span:12},{default:g((()=>[m(n,{label:"* Fee Type"},{default:g((()=>[m(o,{modelValue:K.value.feeType,"onUpdate:modelValue":a[7]||(a[7]=e=>K.value.feeType=e),placeholder:"select fee type",clearable:""},{default:g((()=>[(f(),c(V,null,F(H,(e=>m(d,{label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12},{default:g((()=>[m(n,{label:"* Card Bin"},{default:g((()=>[m(o,{modelValue:K.value.cardBin,"onUpdate:modelValue":a[8]||(a[8]=e=>K.value.cardBin=e)},{default:g((()=>[m(d,{label:"All",value:"All"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12},{default:g((()=>[2==K.value.calType?(f(),y(n,{key:0,label:"* Fixed Fee"},{default:g((()=>[m(Ue,{modelValue:K.value.fee,"onUpdate:modelValue":a[9]||(a[9]=e=>K.value.fee=e),placeholder:"Please enter Fee Rate",min:0,controls:!1},null,8,["modelValue"])])),_:1})):(f(),y(n,{key:1,label:"* Fee Rate"},{default:g((()=>[m(Ue,{modelValue:K.value.fee,"onUpdate:modelValue":a[10]||(a[10]=e=>K.value.fee=e),placeholder:"Please enter Fee Rate",min:0,controls:!1},{suffix:g((()=>a[34]||(a[34]=[v("%")]))),_:1},8,["modelValue"])])),_:1}))])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),m(ke,{modelValue:pe.addFeeUserCfgDialog,"onUpdate:modelValue":a[20]||(a[20]=e=>pe.addFeeUserCfgDialog=e),title:"Set user config",width:"80%",style:{"max-width":"600px"}},{footer:g((()=>[b("span",I,[m(s,{onClick:a[19]||(a[19]=e=>pe.addFeeUserCfgDialog=!1)},{default:g((()=>a[40]||(a[40]=[v("Cancel")]))),_:1}),m(s,{type:"primary",onClick:ee},{default:g((()=>a[41]||(a[41]=[v("Confirm")]))),_:1})])])),default:g((()=>[m(p,{model:K.value,"label-position":"top","label-width":"160px"},{default:g((()=>[m(Te,{gutter:20},{default:g((()=>[m(he,{span:12},{default:g((()=>[m(n,{label:"* Client No"},{default:g((()=>[m(i,{modelValue:K.value.clientNo,"onUpdate:modelValue":a[13]||(a[13]=e=>K.value.clientNo=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12},{default:g((()=>[m(n,{label:"* Fee Type"},{default:g((()=>[m(o,{modelValue:K.value.feeType,"onUpdate:modelValue":a[14]||(a[14]=e=>K.value.feeType=e),placeholder:"select fee type",clearable:""},{default:g((()=>[(f(),c(V,null,F(H,(e=>m(d,{label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12,class:"d-none"},{default:g((()=>[m(n,{label:"* Card Bin"},{default:g((()=>[m(o,{modelValue:K.value.cardBin,"onUpdate:modelValue":a[15]||(a[15]=e=>K.value.cardBin=e)},{default:g((()=>[m(d,{label:"All",value:"All"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12},{default:g((()=>[m(n,{label:"* Fee Cal Method"},{default:g((()=>[m(we,{modelValue:K.value.calType,"onUpdate:modelValue":a[16]||(a[16]=e=>K.value.calType=e)},{default:g((()=>[m(De,{value:1},{default:g((()=>a[37]||(a[37]=[v("rate")]))),_:1}),m(De,{value:2},{default:g((()=>a[38]||(a[38]=[v("fixed")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(he,{span:12},{default:g((()=>[2==K.value.calType?(f(),y(n,{key:0,label:"* Fixed Fee"},{default:g((()=>[m(Ue,{modelValue:K.value.fee,"onUpdate:modelValue":a[17]||(a[17]=e=>K.value.fee=e),placeholder:"Please enter Fee Rate",min:0,controls:!1},null,8,["modelValue"])])),_:1})):(f(),y(n,{key:1,label:"* Fee Rate"},{default:g((()=>[m(Ue,{modelValue:K.value.fee,"onUpdate:modelValue":a[18]||(a[18]=e=>K.value.fee=e),placeholder:"Please enter Fee Rate",min:0,controls:!1},{suffix:g((()=>a[39]||(a[39]=[v("%")]))),_:1},8,["modelValue"])])),_:1}))])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),m(ke,{modelValue:pe.addFeeUserCfgMultiDialog,"onUpdate:modelValue":a[23]||(a[23]=e=>pe.addFeeUserCfgMultiDialog=e),title:"Add Fee User Cfg",width:"80%"},{default:g((()=>[m(xe,{modelValue:ae.value,"onUpdate:modelValue":a[22]||(a[22]=e=>ae.value=e),type:"card","tab-position":"left",class:"mb-2 text-secondary",onTabChange:ie},{default:g((()=>[(f(),c(V,null,F(H,(e=>m(Fe,{label:e.label,name:e.value},{default:g((()=>[b("div",R,[b("div",G,[b("p",null,[a[42]||(a[42]=b("span",{class:"fs-6 fw-bold"},"Current Config:",-1)),a[43]||(a[43]=v()),m(ue,{type:"success"},{default:g((()=>[v(_(ne.value.ID&&ne.value.available?de.value.clientNo:"Global"),1)])),_:1})])]),b("div",j,[b("div",null,[ne.value.ID>0&&ne.value.available?(f(),c("button",{key:0,class:"btn btn-danger me-1",onClick:Z},"Set As Global")):C("",!0),b("button",{class:"btn btn-primary",onClick:a[21]||(a[21]=e=>Ce(ne.value.ID?ne.value:{clientNo:de.value.clientNo},2))},"Edit")]),b("div",null,"Global Config: "+_(ne.value.ID&&ne.value.available?"N":"Y"),1)])]),b("div",E,[1==ne.value.calType?(f(),c("div",L,[b("p",O,"Fee Rate:   "+_(ne.value.fee)+"%",1)])):(f(),c("div",M,[b("p",P,"Fixed Fee:   "+_(ne.value.fee),1)]))]),b("div",W,[m(se,{data:te.value},{default:g((()=>[m(T,{label:"Operator",prop:"name"}),m(T,{label:"Operate Time"},{default:g((({row:e})=>[v(_(h(u)(e.CreatedAt)),1)])),_:1}),m(T,{label:"detail"})])),_:1},8,["data"]),b("div",q,[m(Ve,{style:{"padding-top":"0px",float:"right"},background:"",layout:"total, sizes, prev, pager, next, jumper",total:oe.total,"page-size":oe.pageSize,"current-page":oe.page,onSizeChange:_e,onCurrentChange:ye},null,8,["total","page-size","current-page"])])])])),_:2},1032,["label","name"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-7fc2827a"]]);export{H as default};
