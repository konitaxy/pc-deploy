/*! 
 Build based on melong-console 
 Time : 1754288951000 */
import{_ as e}from"./pixel-logo.1754288951000.js";import{r as l,a,o as s,u as o,c as r,b as t,d,e as i,f as n,w as u,g as m,h as p,i as c,j as f,t as g,E as w,k as v,l as h,s as y}from"../assets/pixel-entry-index.1754288951000.js";import{v as _,a as b}from"./pixel-validates.1754288951000.js";import{g as x,d as V,s as k}from"./pixel-format.1754288951000.js";const C=""+new URL("../assets/pixel-cards_login_new.1754288951000.png",import.meta.url).href,P={class:"container-fluid"},D={class:"raw align-items-end d-flex"},U={class:"col col-6 vh100"},I={class:"right-side"},T={class:"justify-content-between w-100 d-flex"},j={class:"w-100"},R={class:"w-100"},q={class:"w-100"},F={__name:"login",setup(F){const z=l(!1),S=l(),E=l(),L=a({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:_,message:"邮箱格式错误",trigger:"blur"}]}),M=l("login"),A=a({email:"",password:"",authMethod:2,phone:"",code:"",verifyCode:"",remember:!1}),B=a({email:"",password:"",newPassword:""}),G=a({email:"",name:"",repeatPassword:"",password:"",phone:"",verifyCode:"",inviteCode:""});s((()=>{x("verification_free")&&(z.value=!0)}));const H=l(),J=a({email:[{validator:_,trigger:"blur"}],password:[{validator:b,trigger:"blur"}],newPassword:[{validator:(e,l,a)=>{l!==B.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]}),K=a({name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:6,max:20,message:"请输入6-20位字符",trigger:"blur"},{whitespace:!0,message:"不能只为空格",trigger:"blur"}],email:[{validator:_,trigger:"blur"}],password:[{validator:b,trigger:"blur"}],repeatPassword:[{validator:(e,l,a)=>{l!==G.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],inviteCode:[{required:!0,message:"请输入邀请码",trigger:"blur"},{len:6,message:"请输入6位字符",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"请输入6位字符",trigger:"blur"}]}),N=o(),O=async()=>{await S.value.validate()&&N.LoginIn(A).then((e=>{e&&A.remember&&k("verification_free","yes",30)}))},Q=async()=>{await H.value.validate()&&h(B).then((e=>{0===e.code&&(w.success("Reset password success"),M.value="login")}))},W=async()=>{await E.value.validate()&&(G.password==G.repeatPassword?v(G).then((e=>{0===e.code&&(M.value="login",w.success("注册成功"))})):w.error("two password not same"))},X=a({email:"",password:"",newPassword:"",verifyCode:"",disable:!1,sendText:"Send code",intervalID:null,countdown:60,lastDateTime:Date.now()}),Y=async(e,l)=>{null===X.intervalID&&(X.intervalID=-1,y({to:e,type:l}).then((e=>{0===e.code?(w.success("Send success"),X.lastTime=Date.now(),X.intervalID=setInterval((()=>{const e=Date.now()-X.lastTime;X.lastTime=Date.now(),X.countdown-=Math.floor(e/1e3),X.sendText="Resend code "+X.countdown,X.countdown<=0&&(clearInterval(X.intervalID),X.intervalID=null,X.countdown=60,X.sendText="Send code")}),1e3)):X.intervalID=null})))};return(l,a)=>{const s=m("el-input"),o=m("el-form-item"),w=m("el-checkbox"),v=m("el-link"),h=m("el-button"),y=m("el-form"),_=m("el-card"),b=m("el-col"),x=m("el-row");return p(),r("div",P,[t("div",D,[a[31]||(a[31]=d('<div class="col col-6 vh100"><div class="left-container"><div class="logo text-center"><img src="'+e+'" alt="Logo" class="logo"></div><div class="slogan text-left"><h1 class="mb-2">Streamline</h1><h1 class="mb-2 text-highlight">your Finances</h1><h1 class="mb-2">with</h1><h1 class="mb-2 text-highlight">Pixel Cards</h1><div class="left-main-image text-center"><img src="'+C+'" alt="Main" class="main-image"></div></div></div></div>',1)),t("div",U,[t("div",I,["login"==M.value?(p(),i(_,{key:0,class:"login-card login-form"},{default:u((()=>[a[23]||(a[23]=t("h2",{class:"mb-3 fs-5"},"用户登录",-1)),c(y,{ref_key:"loginFormRef",ref:S,model:A,rules:L,"label-width":"0px"},{default:u((()=>[c(o,{prop:"email",class:"login-form-item"},{default:u((()=>[c(s,{modelValue:A.email,"onUpdate:modelValue":a[0]||(a[0]=e=>A.email=e),placeholder:"邮箱",class:"login-form-input"},null,8,["modelValue"])])),_:1}),c(o,{prop:"password",class:"login-form-item"},{default:u((()=>[c(s,{modelValue:A.password,"onUpdate:modelValue":a[1]||(a[1]=e=>A.password=e),type:"password",placeholder:"密码",class:"login-form-input","show-password":""},null,8,["modelValue"])])),_:1}),c(o,null,{default:u((()=>[t("div",T,[t("div",null,[z.value?n("",!0):(p(),i(w,{key:0,modelValue:A.remember,"onUpdate:modelValue":a[2]||(a[2]=e=>A.remember=e),style:{"font-size":"12px"}},{default:u((()=>a[18]||(a[18]=[f("30天免验证")]))),_:1},8,["modelValue"]))]),t("div",null,[c(v,{onClick:a[3]||(a[3]=e=>(V("verification_free"),void window.location.reload())),type:"danger",style:{float:"right","margin-left":"10px","font-size":"12px"}},{default:u((()=>a[19]||(a[19]=[f("清除缓存")]))),_:1}),c(v,{type:"danger",style:{float:"right","font-size":"12px"},onClick:a[4]||(a[4]=e=>M.value="forgetPassword")},{default:u((()=>a[20]||(a[20]=[f("忘记密码")]))),_:1})])])])),_:1}),c(o,null,{default:u((()=>[c(h,{class:"w-100 login-btn",type:"primary",onClick:O},{default:u((()=>a[21]||(a[21]=[f("登录")]))),_:1}),t("div",j,[c(h,{style:{float:"right"},class:"btn text-end text-end btn-link",onClick:a[5]||(a[5]=e=>M.value="register")},{default:u((()=>a[22]||(a[22]=[f("注册")]))),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):n("",!0),"register"==M.value?(p(),i(_,{key:1,class:"login-card"},{default:u((()=>[a[26]||(a[26]=t("h2",{class:"mb-3 fs-5"},"用户注册",-1)),c(y,{ref_key:"registerFormRef",ref:E,model:G,rules:K,"label-width":"0px"},{default:u((()=>[c(o,{prop:"name"},{default:u((()=>[c(s,{modelValue:G.name,"onUpdate:modelValue":a[6]||(a[6]=e=>G.name=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),c(o,{prop:"email"},{default:u((()=>[c(s,{modelValue:G.email,"onUpdate:modelValue":a[7]||(a[7]=e=>G.email=e),placeholder:"邮箱"},null,8,["modelValue"])])),_:1}),c(o,{prop:"password"},{default:u((()=>[c(s,{modelValue:G.password,"onUpdate:modelValue":a[8]||(a[8]=e=>G.password=e),type:"password",placeholder:"密码","show-password":""},null,8,["modelValue"])])),_:1}),c(o,{prop:"repeatPassword"},{default:u((()=>[c(s,{modelValue:G.repeatPassword,"onUpdate:modelValue":a[9]||(a[9]=e=>G.repeatPassword=e),type:"password",placeholder:"再次输入密码","show-password":""},null,8,["modelValue"])])),_:1}),c(o,{prop:"inviteCode"},{default:u((()=>[c(s,{modelValue:G.inviteCode,"onUpdate:modelValue":a[10]||(a[10]=e=>G.inviteCode=e),placeholder:"邀请码"},null,8,["modelValue"])])),_:1}),c(o,{prop:"verifyCode"},{default:u((()=>[c(x,{gutter:20,style:{padding:"0"}},{default:u((()=>[c(b,{span:16},{default:u((()=>[c(s,{required:"",modelValue:G.verifyCode,"onUpdate:modelValue":a[11]||(a[11]=e=>G.verifyCode=e),placeholder:"邮箱验证码"},null,8,["modelValue"])])),_:1}),c(b,{span:8},{default:u((()=>[c(h,{disabled:null!=X.intervalID,style:{padding:"8px 17px"},type:"primary",onClick:a[12]||(a[12]=e=>{Y(G.email,"registerVerify")})},{default:u((()=>[f(g(X.sendText),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),c(o,null,{default:u((()=>[c(h,{class:"w-100",type:"primary",onClick:W},{default:u((()=>a[24]||(a[24]=[f("注册")]))),_:1}),t("div",R,[c(h,{class:"btn text-end text-end btn-link",onClick:a[13]||(a[13]=e=>M.value="login")},{default:u((()=>a[25]||(a[25]=[f("登录")]))),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):n("",!0),"forgetPassword"==M.value?(p(),i(_,{key:2,class:"login-card"},{default:u((()=>[a[29]||(a[29]=t("h2",{class:"mb-3 fs-5"},"Forgot password?",-1)),a[30]||(a[30]=t("p",{class:"text-secondary",style:{"font-size":"small"}},"Please enter the email you use to log in to your account",-1)),c(y,{ref_key:"foundPasswordFormRef",ref:H,model:B,rules:J,"label-width":"0px"},{default:u((()=>[c(o,{prop:"email"},{default:u((()=>[c(s,{modelValue:B.email,"onUpdate:modelValue":a[14]||(a[14]=e=>B.email=e),placeholder:"邮箱"},null,8,["modelValue"])])),_:1}),c(o,{prop:"password"},{default:u((()=>[c(s,{modelValue:B.password,"onUpdate:modelValue":a[15]||(a[15]=e=>B.password=e),type:"password",placeholder:"新密码","show-password":""},null,8,["modelValue"])])),_:1}),c(o,{prop:"newPassword"},{default:u((()=>[c(s,{modelValue:B.newPassword,"onUpdate:modelValue":a[16]||(a[16]=e=>B.newPassword=e),type:"password",placeholder:"再次输入密码","show-password":""},null,8,["modelValue"])])),_:1}),c(o,null,{default:u((()=>[c(h,{class:"w-100",type:"primary",onClick:Q},{default:u((()=>a[27]||(a[27]=[f("确认")]))),_:1}),t("div",q,[c(h,{class:"btn text-end text-end btn-link",onClick:a[17]||(a[17]=e=>M.value="login")},{default:u((()=>a[28]||(a[28]=[f("登录")]))),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1})):n("",!0)])])])])}}};export{F as default};
