/*! 
 Build based on melong-console 
 Time : 1754664614000 */
import{_ as e,r as s,a as t,o as l,c as a,e as n,g as o,w as i,f as d,n as c,i as r,d as u,p as w,q as m,t as p,j as f,s as b,E as x,m as v,v as g}from"../assets/pixel-entry-index.1754664614000.js";import h from"./pixel-index.17546646140004.js";import"./pixel-logo-tp.1754664614000.js";import"./pixel-screenfull.1754664614000.js";import"./pixel-language.1754664614000.js";const y={class:"h-100"},k={class:"bg-white rounded-2 login-form"},D={class:"mb-1"},P={class:"w-100 align-items-end justify-content-between d-flex"},_={class:"mb-1"},j={class:"d-flex text-nowrap"},I={class:"d-flex text-nowrap"},V={class:"d-flex text-nowrap"},C={class:"d-flex text-nowrap"},S={class:"mb-4"},T={class:"d-flex text-nowrap"},A={class:"d-flex text-nowrap"},N={class:"d-flex text-nowrap"},U={class:"d-flex text-nowrap"},L={class:"bg-white rounded-2 justify-content-center text-center p-5 mt-5"},R=e({__name:"refound_password",setup(e){c();const R=s(!0),q=s(!1),E=/[a-zA-Z]/,F=/[0-9]/,z=/\s/,M=t({email:"",password:"",newPassword:"",verifyCode:"",disable:!1,sendText:"Send verification code",intervalID:null,countdown:60,lastDateTime:Date.now()}),Z=t({to:"",type:"resetPassword"}),B=async()=>{null===M.intervalID&&(M.intervalID=-1,Z.to=M.email,b(Z).then((e=>{0===e.code?(x.success("Send success"),M.lastTime=Date.now(),M.intervalID=setInterval((()=>{const e=Date.now()-M.lastTime;M.lastTime=Date.now(),M.countdown-=Math.floor(e/1e3),M.sendText="Resend verification code "+M.countdown,M.countdown<=0&&(clearInterval(M.intervalID),M.intervalID=null,M.countdown=60,M.sendText="Send verification code")}),1e3)):M.intervalID=null})))},G=()=>{M.password===M.newPassword?v(M).then((e=>{0===e.code&&(R.value=!1)})):x.error("Password is not same")};l((()=>{const e=window.localStorage.getItem("verificationFree");null==e?q.value=!1:(new Date).setDate((new Date).getDate()+30)>new Date(e)?(q.value=!1,window.localStorage.removeItem("verificationFree")):q.value=!0}));const H=()=>{g.push({name:"Login",replace:!0})};return(e,s)=>{const t=d("el-header"),l=d("el-input"),c=d("el-tooltip"),b=d("el-form-item"),x=d("el-button"),v=d("el-form"),g=d("el-col"),q=d("el-row");return r(),a("div",y,[n(t,{class:"bg-white"},{default:i((()=>[n(h)])),_:1}),R.value?(r(),o(q,{key:0,class:"w-100 h-100 justify-content-center align-items-center"},{default:i((()=>[n(g,{xs:24,sm:24,md:12,class:"d-flex justify-content-center align-items-center"},{default:i((()=>[u("div",k,[s[19]||(s[19]=u("h3",{class:"text-center fs-2 login-title d-flex justify-content-center align-items-center"},"Set your account password",-1)),n(v,{class:"bg-white container rounded-4 p-4"},{default:i((()=>[u("div",D,[s[4]||(s[4]=u("div",{class:"mb-1"},"Email Address",-1)),n(l,{disabled:M.disable,modelValue:M.email,"onUpdate:modelValue":s[0]||(s[0]=e=>M.email=e),required:""},null,8,["disabled","modelValue"])]),u("div",null,[u("div",P,[s[5]||(s[5]=u("span",{class:"mb-1"},"Received Code",-1)),u("button",{class:m(null===M.intervalID?"text-danger btn btn-link":"text-secondary btn btn-link"),onClick:w(B,["prevent"])},[u("span",null,p(M.sendText),1)],2)]),n(l,{modelValue:M.verifyCode,"onUpdate:modelValue":s[1]||(s[1]=e=>M.verifyCode=e)},null,8,["modelValue"])]),u("div",_,[s[11]||(s[11]=u("div",{class:"mb-1"},"Password",-1)),n(b,{label:"Set New Password"},{default:i((()=>[n(c,{trigger:"click",effect:"light",placement:"bottom-start"},{content:i((()=>[u("div",null,[s[10]||(s[10]=u("span",{class:"fw-medium"},"Password must include:",-1)),u("div",j,[u("i",{class:m(M.password.length>7&&M.password.length<20?"bi bi-check text-success fs-4 me-1":"bi bi-x text-danger fs-4 me-1")},null,2),s[6]||(s[6]=u("p",null,"8-20 characters",-1))]),u("div",I,[u("i",{class:m(E.test(M.password)?"bi bi-check text-success fs-4 me-1":"bi bi-x text-danger fs-4 me-1")},null,2),s[7]||(s[7]=u("p",null,"At least one capital letter",-1))]),u("div",V,[u("i",{class:m(F.test(M.password)?"bi bi-check text-success fs-4 me-1":"bi bi-x text-danger fs-4 me-1")},null,2),s[8]||(s[8]=u("p",null,"At least one number",-1))]),u("div",C,[u("i",{class:m(z.test(M.password)?"bi bi-x text-danger fs-4 me-1":"bi bi-check text-success fs-4 me-1")},null,2),s[9]||(s[9]=u("p",null,"No spaces",-1))])])])),default:i((()=>[n(l,{type:"password",modelValue:M.password,"onUpdate:modelValue":s[2]||(s[2]=e=>M.password=e),minlength:6,"show-password":"",clearable:"",autocomplete:"new-password"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",S,[s[17]||(s[17]=u("div",{class:"mb-1"},"Repeat Password",-1)),n(b,{label:"Set New Password"},{default:i((()=>[n(c,{trigger:"click",effect:"light",placement:"bottom-start"},{content:i((()=>[u("div",null,[s[16]||(s[16]=u("span",{class:"fw-medium"},"Password must include:",-1)),u("div",T,[u("i",{class:m(M.newPassword.length>7&&M.newPassword.length<20?"bi bi-check text-success fs-4 me-1":"bi bi-x text-danger fs-4 me-1")},null,2),s[12]||(s[12]=u("p",null,"8-20 characters",-1))]),u("div",A,[u("i",{class:m(E.test(M.newPassword)?"bi bi-check text-success fs-4 me-1":"bi bi-x text-danger fs-4 me-1")},null,2),s[13]||(s[13]=u("p",null,"At least one capital letter",-1))]),u("div",N,[u("i",{class:m(F.test(M.newPassword)?"bi bi-check text-success fs-4 me-1":"bi bi-x text-danger fs-4 me-1")},null,2),s[14]||(s[14]=u("p",null,"At least one number",-1))]),u("div",U,[u("i",{class:m(z.test(M.newPassword)?"bi bi-x text-danger fs-4 me-1":"bi bi-check text-success fs-4 me-1")},null,2),s[15]||(s[15]=u("p",null,"No spaces",-1))])])])),default:i((()=>[n(l,{type:"password",modelValue:M.newPassword,"onUpdate:modelValue":s[3]||(s[3]=e=>M.newPassword=e),minlength:6,"show-password":"",clearable:"",autocomplete:"new-password"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",null,[n(x,{onClick:G,class:"w-100 text-center mt-1 btn btn-danger"},{default:i((()=>s[18]||(s[18]=[f("Confirm")]))),_:1}),u("button",{class:"btn btn-link text-danger text-decoration-none text-end w-100",onClick:H},"Login")])])),_:1})])])),_:1})])),_:1})):(r(),o(q,{key:1,class:"w-100 justify-content-center"},{default:i((()=>[u("div",L,[s[21]||(s[21]=u("h1",{class:"text-center fs-2"},"Congratulations！",-1)),s[22]||(s[22]=u("h3",{class:"text-center fs-6 w-100 d-flex justify-content-center mt-3"},[u("span",{class:"w-50"},"Password reset successful, please start your show")],-1)),n(x,{onClick:H,class:"w-50 text-center mt-3 btn btn-danger"},{default:i((()=>s[20]||(s[20]=[f("Login Now")]))),_:1})])])),_:1}))])}}},[["__scopeId","data-v-64d8d494"]]);export{R as default};
