/*! 
 Build based on melong-console 
 Time : 1754566959000 */
import{m as e,x as a,r as s,u as t,y as l,z as n,g as u,c as r,h as o,i,A as v,w as m,F as c,B as y,e as p,b as d,C as g,D as f,j as h,t as b,n as S,G as q,H as I}from"../assets/pixel-entry-index.1754566959000.js";/* empty css                                                           */const x={class:"router-history"},O={name:"HistoryComponent"},k=Object.assign(O,{setup(O){const k=e(),N=a(),C=e=>e.name+JSON.stringify(e.query)+JSON.stringify(e.params),J=s([]),w=s(""),j=s(!1),_=t(),V=e=>e.name+JSON.stringify(e.query)+JSON.stringify(e.params),E=s(0),H=s(0),P=s(!1),T=s(!1),A=s(""),L=l((()=>_.userInfo.authority.defaultRouter)),R=()=>{J.value=[{name:L.value,meta:{title:"Home"},query:{},params:{}}],N.push({name:L.value}),j.value=!1,sessionStorage.setItem("historys",JSON.stringify(J.value))},z=()=>{let e;const a=J.value.findIndex((a=>(C(a)===A.value&&(e=a),C(a)===A.value))),s=J.value.findIndex((e=>C(e)===w.value));J.value.splice(0,a),a>s&&N.push(e),sessionStorage.setItem("historys",JSON.stringify(J.value))},B=()=>{let e;const a=J.value.findIndex((a=>(C(a)===A.value&&(e=a),C(a)===A.value))),s=J.value.findIndex((e=>C(e)===w.value));J.value.splice(a+1,J.value.length),a<s&&N.push(e),sessionStorage.setItem("historys",JSON.stringify(J.value))},D=()=>{let e;J.value=J.value.filter((a=>(C(a)===A.value&&(e=a),C(a)===A.value))),N.push(e),sessionStorage.setItem("historys",JSON.stringify(J.value))},F=e=>{if(!J.value.some((a=>((e,a)=>{if(e.name!==a.name)return!1;if(Object.keys(e.query).length!==Object.keys(a.query).length||Object.keys(e.params).length!==Object.keys(a.params).length)return!1;for(const s in e.query)if(e.query[s]!==a.query[s])return!1;for(const s in e.params)if(e.params[s]!==a.params[s])return!1;return!0})(a,e)))){const a={};a.name=e.name,a.meta={...e.meta},delete a.meta.matched,a.query=e.query,a.params=e.params,J.value.push(a)}window.sessionStorage.setItem("activeValue",C(e))},G=e=>{const a=e.instance.attrs.tab;N.push({name:a.name,query:a.query,params:a.params})},U=e=>{const a=J.value.findIndex((a=>C(a)===e));C(k)===e&&(1===J.value.length?N.push({name:L.value}):a<J.value.length-1?N.push({name:J.value[a+1].name,query:J.value[a+1].query,params:J.value[a+1].params}):N.push({name:J.value[a-1].name,query:J.value[a-1].query,params:J.value[a-1].params})),J.value.splice(a,1)};n(j,(()=>{j.value?document.body.addEventListener("click",(()=>{j.value=!1})):document.body.removeEventListener("click",(()=>{j.value=!1}))})),n(k,((e,a)=>{"Login"!==e.name&&"Reload"!==e.name&&(J.value=J.value.filter((e=>!e.meta.closeTab)),F(e),sessionStorage.setItem("historys",JSON.stringify(J.value)),w.value=window.sessionStorage.getItem("activeValue"))}));return(()=>{I.on("closeThisPage",(()=>{U(V(k))})),I.on("closeAllPage",(()=>{R()})),I.on("mobile",(e=>{T.value=e})),I.on("collapse",(e=>{P.value=e}));const e=[{name:L.value,meta:{title:"Home"},query:{},params:{}}];J.value=JSON.parse(sessionStorage.getItem("historys"))||e,window.sessionStorage.getItem("activeValue")?w.value=window.sessionStorage.getItem("activeValue"):w.value=C(k),F(k)})(),(e,a)=>{const s=u("el-tab-pane"),t=u("el-tabs");return o(),r("div",x,[i(t,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value=e),closable:!(1===J.value.length&&e.$route.name===L.value),type:"card",onContextmenu:a[1]||(a[1]=S((e=>(e=>{if(1===J.value.length&&k.name===L.value)return!1;let a="";if(a="SPAN"===e.srcElement.nodeName?e.srcElement.offsetParent.id:e.srcElement.id,a){let s;j.value=!0,s=P.value?54:220,T.value&&(s=0),E.value=e.clientX-s,H.value=e.clientY+10,A.value=a.split("-")[1]}})(e)),["prevent"])),onTabClick:G,onTabRemove:U},{default:m((()=>[(o(!0),r(c,null,y(J.value,(e=>(o(),p(s,{key:V(e),label:e.meta.title,name:V(e),tab:e,class:"gva-tab"},{label:m((()=>[d("span",{style:g({color:w.value===V(e)?f(_).activeColor:"#333"})},[d("i",{class:"dot",style:g({backgroundColor:w.value===V(e)?f(_).activeColor:"#ddd"})},null,4),h(" "+b(e.meta.title),1)],4)])),_:2},1032,["label","name","tab"])))),128))])),_:1},8,["modelValue","closable"]),v(d("ul",{style:g({left:E.value+"px",top:H.value+"px"}),class:"contextmenu"},[d("li",{onClick:R},"关闭所有"),d("li",{onClick:z},"关闭左侧"),d("li",{onClick:B},"关闭右侧"),d("li",{onClick:D},"关闭其他")],4),[[q,j.value]])])}}});export{k as default};
